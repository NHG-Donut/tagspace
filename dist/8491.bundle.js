"use strict";(self.webpackChunktagspaces=self.webpackChunktagspaces||[]).push([[8491],{75031:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(96540);function a(){const[e,t]=(0,n.useState)(()=>new Set),r=(0,n.useCallback)((e,r=!0)=>{t(t=>{const n=new Set(t);return r?n.add(e):n.delete(e),n})},[]),a=(0,n.useCallback)(t=>t?e.has(t):e.size>0,[e]);return(0,n.useMemo)(()=>({setError:r,haveError:a}),[r,a])}},97298:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(74848),a=r(96488),o=r(87729),i=r(38291),s=r(10812),l=r(45575),d=r(34120),c=r(50456),u=r(19825),g=r(2788),h=r(47842),p=r(61734),A=r(75031),x=r(29608),T=r(55370),f=r(25418),m=r(91799),E=r(87714),v=r(49565),C=r(53356),j=r(22944),y=r(96540),b=r(32389);const k=u.C?.UI?.GeoTagEditor??y.Fragment,w=u.C?.UI?.DateTagEditor??y.Fragment,D=function({open:e,entries:t,tag:r,onClose:u}){const{t:D}=(0,b.Bd)(),{addTagsToFsEntries:S,editTagForEntry:M}=(0,c.f)(),[B,F]=(0,y.useState)(!1),[I,P]=(0,y.useState)(!1),{setError:W,haveError:H}=(0,A.A)(),R=(0,y.useRef)(r?.title||""),[,U]=(0,y.useReducer)(e=>e+1,0),V=(0,C.A)(),z=(0,j.A)(V.breakpoints.down("md")),G=()=>{R.current="",u()},K=(0,y.useMemo)(()=>R.current!==r?.title,[R.current,r?.title]),L=(0,y.useMemo)(()=>{const e=R.current||r?.title;if(!w||!e)return!1;if(e.includes("-")){const t=e.split("-");return 2===t.length&&t.every(h.m2)}return(0,h.m2)(e)&&!(0,h.gv)(e)&&!(0,h.Wb)(e)},[R.current,r?.title]),_=()=>{H()||("geoTagging"===r.functionality||"dateTagging"===r.functionality?S(t,[{...r,title:R.current}]):1===t.length&&M(t[0].path,r,R.current),G())},q=e=>{R.current=e,U()};return(0,n.jsxs)(T.A,{open:e,fullScreen:z,onClose:G,sx:{minWidth:400,height:"100%",marginBottom:30},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),_())},scroll:"paper",PaperComponent:z?v.A:o.A,"aria-labelledby":"draggable-dialog-title",children:[(0,n.jsx)(d.A,{dialogTitle:D("core:tagProperties"),closeButtonTestId:"closeEditEntryTagTID",onClose:G}),(()=>{const e=k&&(0,p.Ao)(r?.title);return(0,n.jsxs)(f.A,{"data-tid":"editEntryTagDialog",sx:{overflow:"auto",minWidth:"545px",minHeight:"190px"},children:[(0,n.jsxs)(m.A,{fullWidth:!0,error:H("tag"),children:[(0,n.jsx)(s.A,{error:H("tag"),disabled:I,name:"title",autoFocus:!0,updateValue:q,retrieveValue:()=>R.current||r?.title,label:D("core:editTag"),onChange:e=>{const{value:t}=e.target;(e=>{const t=(0,g.xd)(e);W("tag",!t)})(t),q(t)},value:R.current||r?.title,"data-tid":"editTagEntryDialog_input",slotProps:{input:{endAdornment:(0,n.jsx)(x.A,{onClick:()=>P(!I)})}}}),H("tag")&&(0,n.jsx)(E.A,{children:D("core:tagTitleHelper")})]}),e&&(0,n.jsx)(k,{geoTag:r?.title,onChange:q,showAdvancedMode:B,haveError:H,setError:W}),L&&r&&(0,n.jsx)(w,{datePeriodTag:R.current||r?.title,onChange:q})]})})(),(0,n.jsxs)(l.A,{style:{justifyContent:"space-between"},children:[k&&(0,p.Ao)(r?.title)?(0,n.jsx)(i.A,{"data-tid":"switchAdvancedModeTID",onClick:()=>F(!B),children:D(B?"core:switchSimpleMode":"core:switchAdvancedMode")}):(0,n.jsx)("div",{}),(0,n.jsxs)("div",{children:[(0,n.jsx)(i.A,{"data-tid":"closeEditTagEntryDialog",onClick:G,children:D("core:cancel")}),(0,n.jsx)(i.A,{disabled:H()&&!K,style:{marginLeft:a.A.defaultSpaceBetweenButtons},onClick:_,"data-tid":"confirmEditTagEntryDialog",variant:"contained",children:D("core:ok")})]})]})]})}}}]);
//# sourceMappingURL=8491.bundle.js.map