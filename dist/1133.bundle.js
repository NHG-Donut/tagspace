"use strict";(self.webpackChunktagspaces=self.webpackChunktagspaces||[]).push([[1133],{62840:(e,i,r)=>{r.d(i,{u:()=>o});var t=r(96540),n=r(48884);const o=()=>(0,t.useContext)(n.H)},90197:(e,i,r)=>{r.r(i),r.d(i,{default:()=>Q});var t=r(74848),n=r(96540),o=r(51475),a=r(67172),s=r(96488),c=r(77118),d=r(19825),l=r(2788),h=(r(1532),r(50494)),u=r(32535),x=r(41244),p=r(48373),g=r(95150),j=r(14970),A=r(15548),m=r(12070),y=r(16738),D=r(37603),C=r(69733),T=r(32389),k=r(22013),f=r(50456),F=r(70704),v=r(14562),w=r(69605),b=r(73989),P=r(45387),M=r(65472),E=r(3427),I=r(4721),L=r(36749),S=r(47902),B=r(62840),N=r(1881),R=r(80883),U=r(52282),W=r(84952),$=r(27785),O=r(66530),_=r(20404),q=r(33575);const Q=function(e){const{t:i}=(0,T.Bd)(),{openAddRemoveTagsDialog:r,openMoveCopyFilesDialog:Q,openRenameEntryDialog:H}=(0,_.K)(),{openEntry:K}=(0,k.s)(),{selectedEntries:Y,setSelectedEntries:X}=(0,b._)(),{addTags:z}=(0,f.f)(),{openProgressDialog:G,closeProgressDialog:Z}=(0,B.u)(),{openNewFileDialog:J}=(0,N.d)(),{currentLocation:V,getLocationPath:ee,findLocation:ie}=(0,F.L)(),{setThumbnailImageChange:re,getMetadataID:te}=(0,L.E)(),{showNotification:ne}=(0,w.M)(),{openFileUpload:oe}=(0,$.i)(),{openCreateDirectoryDialog:ae}=(0,S.w)(),{openDirectory:se,currentDirectoryPath:ce,currentDirectoryEntries:de,setManualDirectoryPerspective:le,openCurrentDirectory:he,getAllPropertiesPromise:ue}=(0,v.L)(),{generateThumbnails:xe}=(0,n.useContext)(M.y),{copyFilePromise:pe,renameFilePromise:ge}=(0,P.U)(),{setReflectActions:je}=(0,I.u)(),{openNewAudioDialog:Ae}=(0,R.x)(),{openProTeaserDialog:me}=(0,U.Y)(),{openImportMacTagDialog:ye}=(0,n.useContext)(q._),{openDeleteMultipleEntriesDialog:De}=(0,W.u)(),Ce=d.C?.contextProviders?.ThumbDialogContext?(0,n.useContext)(d.C.contextProviders.ThumbDialogContext):void 0,Te=d.C?.contextProviders?.BgndDialogContext?(0,n.useContext)(d.C.contextProviders.BgndDialogContext):void 0,{open:ke,onClose:fe,anchorEl:Fe,mouseX:ve,mouseY:we,items:be,switchPerspective:Pe,perspectiveMode:Me,switchPerspectives:Ee}=e,Ie=e.directoryPath||ce;function Le(){let e,i=ce;Y&&Y.length>0&&(Y[0].locationID&&(e=Y[0].locationID),i=Y[0].path);const r=ie(e);return ee(r).then(t=>{const n=(0,l.Cd)(t,i),o=(0,c.extractDirectoryName)(Y[0]?Y[0].name:ce,V?.getDirSeparator());return te(i,Y[0]?.uuid,r).then(i=>({url:(0,c.generateSharingLink)(e,void 0,n,i),name:o}))})}function Se(e){console.log("Camera Failed: "+e)}function Be(e){window.resolveLocalFileSystemURL(e,e=>{!function(e){const i="IMG_TS"+s.A.beginTagContainer+(0,a.formatDateTime4Tag)(new Date,!0)+s.A.endTagContainer+".jpg",r=(0,c.normalizePath)(Ie)+V.getDirSeparator()+i;ge(e,r,V.uuid,void 0,!1).then(e=>(je({action:"add",entry:e}),ne("File "+r+" successfully imported.","default",!0),!0)).catch(e=>(console.log("Save to file "+r+" failed "+e),ne("Importing file "+r+" failed.","error",!0),!0))}(e.nativeURL)},()=>{console.log("Failed to get filesystem url")})}const Ne=be||function(e,i,r,n,o,a,c,l,h,T,k,f,F,v,w,b,P,M,E,I,L,S,B,N,R,U){const W=(0,C.d4)(j.oh),$=((0,C.d4)(j.n),[]);return i.length<2&&(r?(c&&$.push((0,t.jsxs)(D.A,{"data-tid":"openDirectory",onClick:()=>{o(),c()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.OE,{})}),(0,t.jsx)(y.A,{primary:a("core:openDirectory")}),(0,t.jsx)(g.A,{keyBinding:W.openEntry})]},"openDirectory")),N&&$.push((0,t.jsxs)(D.A,{"data-tid":"openInNewWindow",onClick:()=>{o(),N()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.K2,{})}),(0,t.jsx)(y.A,{primary:a("core:openInWindow")})]},"openInNewWindow"))):l&&$.push((0,t.jsxs)(D.A,{"data-tid":"reloadDirectory",onClick:()=>{o(),l()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.jf,{})}),(0,t.jsx)(y.A,{primary:a("core:reloadDirectory")}),(0,t.jsx)(g.A,{keyBinding:W.reloadDocument})]},"reloadDirectory")),!n&&h&&$.push((0,t.jsxs)(D.A,{"data-tid":"renameDirectory",onClick:()=>{o(),h()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.CF,{})}),(0,t.jsx)(y.A,{primary:a("core:renameDirectory")}),(0,t.jsx)(g.A,{keyBinding:W.renameFile})]},"renameDirectory"))),!n&&T&&e&&$.push((0,t.jsxs)(D.A,{"data-tid":"fileMenuMoveCopyDirectoryTID",onClick:()=>{o(),T(i)},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u._O,{})}),(0,t.jsx)(y.A,{primary:a("core:moveCopyDirectory")}),(0,t.jsx)(g.A,{keyBinding:W.copyMoveSelectedEntries})]},"fileMenuMoveCopyDirectory")),!n&&k&&$.push((0,t.jsxs)(D.A,{"data-tid":"deleteDirectory",onClick:()=>{o(),k()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.d7,{})}),(0,t.jsx)(y.A,{primary:a("core:deleteDirectory")}),(0,t.jsx)(g.A,{keyBinding:W.deleteDocument})]},"deleteDirectory")),e&&i.length<2&&!(e.haveObjectStoreSupport()||e.haveWebDavSupport()||s.A.isWeb)&&f&&$.push((0,t.jsxs)(D.A,{"data-tid":"showInFileManager",onClick:()=>{o(),f()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.AQ,{})}),(0,t.jsx)(y.A,{primary:a("core:showInFileManager")}),(0,t.jsx)(g.A,{keyBinding:W.openFileExternally})]},"showInFileManager")),$.push((0,t.jsx)(A.A,{},`divider-${$.length}`)),n||r||(F&&($.push((0,t.jsxs)(D.A,{"data-tid":"createNewTextFileTID",onClick:()=>{o(),F("txt")},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.OF,{})}),(0,t.jsx)(y.A,{primary:a("core:createTextFile")})]},"createNewTextFile")),$.push((0,t.jsxs)(D.A,{"data-tid":"createNewMarkdownFileTID",onClick:()=>{o(),F("md")},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.bg,{})}),(0,t.jsx)(y.A,{primary:a("core:createMarkdown")}),(0,t.jsx)(p.A,{tooltip:a("core:createMarkdownTitle")})]},"createNewMarkdownFile")),$.push((0,t.jsxs)(D.A,{"data-tid":"createHTMLTextFileTID",onClick:()=>{o(),F("html")},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.ZP,{})}),(0,t.jsx)(y.A,{primary:a("core:createRichTextFile")}),(0,t.jsx)(p.A,{tooltip:a("core:createNoteTitle")})]},"createHTMLTextFile")),$.push((0,t.jsxs)(D.A,{"data-tid":"createNewLinkFileTID",onClick:()=>{o(),F("url")},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.Ec,{})}),(0,t.jsx)(y.A,{primary:a("core:createLinkFile")})]},"createNewLinkFile"))),v&&$.push((0,t.jsxs)(D.A,{"data-tid":"createNewAudioTID",disabled:!d.C,onClick:()=>{o(),v()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.X3,{})}),(0,t.jsx)(y.A,{primary:(0,t.jsxs)(t.Fragment,{children:[a("core:newAudioRecording"),!d.C&&(0,t.jsx)(x.ad,{})]})})]},"createNewAudio")),w&&($.push((0,t.jsx)(A.A,{},`divider-${$.length}`)),$.push((0,t.jsxs)(D.A,{"data-tid":"newSubDirectory",onClick:()=>{o(),w()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.WE,{})}),(0,t.jsx)(y.A,{primary:a("core:newSubdirectory")})]},"newSubDirectory"))),b&&$.push((0,t.jsxs)(D.A,{"data-tid":"addExistingFile",onClick:()=>{o(),b()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.q$,{})}),(0,t.jsx)(y.A,{primary:a("core:addFiles")})]},"addExistingFile"))),d.C&&!n&&i.length<2&&($.push((0,t.jsx)(A.A,{},`divider-${$.length}`)),P&&r&&$.push((0,t.jsxs)(D.A,{"data-tid":"setAsThumbTID",onClick:()=>{o(),P()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.RD,{})}),(0,t.jsx)(y.A,{primary:a("core:setAsParentFolderThumbnail")})]},"setAsThumb")),R&&$.push((0,t.jsxs)(D.A,{"data-tid":"changeThumbTID",onClick:()=>{o(),R()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.Ql,{})}),(0,t.jsx)(y.A,{primary:a("core:changeThumbnail")})]},"changeThumb")),U&&$.push((0,t.jsxs)(D.A,{"data-tid":"changeBackgroundTID",onClick:()=>{o(),U()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.KA,{})}),(0,t.jsx)(y.A,{primary:a("core:changeBackgroundColor")})]},"changeBackground"))),1===i.length&&M&&$.push((0,t.jsxs)(D.A,{"data-tid":"copyDirectorySharingLink",onClick:()=>{o(),M()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.qY,{})}),(0,t.jsx)(y.A,{primary:a("core:copySharingLink")})]},"copySharingLink")),!n&&B&&$.push((0,t.jsxs)(D.A,{"data-tid":"dirMenuAddRemoveTags",onClick:()=>{o(),B(i)},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.gq,{})}),(0,t.jsx)(y.A,{primary:a("core:addRemoveTags")}),(0,t.jsx)(g.A,{keyBinding:W.addRemoveTags})]},"dirMenuAddRemoveTags")),i.length<2&&s.A.isElectron&&s.A.isMacLike&&!r&&E&&$.push((0,t.jsxs)(D.A,{"data-tid":"importMacTags",disabled:!d.C,onClick:()=>{o(),E()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.MR,{})}),(0,t.jsx)(y.A,{primary:(0,t.jsxs)(t.Fragment,{children:[a("core:importMacTags"),!d.C&&(0,t.jsx)(x.ad,{})]})})]},"importMacTags")),s.A.isCordova&&S&&$.push((0,t.jsxs)(D.A,{"data-tid":"takePicture",onClick:()=>{o(),S()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.q$,{})}),(0,t.jsx)(y.A,{primary:a("core:cameraTakePicture")})]},"takePicture")),i.length<2&&L&&($.push((0,t.jsx)(A.A,{},`divider-${$.length}`)),$.push((0,t.jsxs)(D.A,{"data-tid":"showProperties",onClick:()=>{o(),L()},children:[(0,t.jsx)(m.A,{children:(0,t.jsx)(u.Bx,{})}),(0,t.jsx)(y.A,{primary:a("core:directoryPropertiesTitle")}),(0,t.jsx)(g.A,{keyBinding:W.openEntryDetails})]},"showProperties"))),$}(V,Y,Me,V?.isReadOnly,fe,i,function(){return se(Ie)},function(){return xe?xe(de).then(()=>he()):he()},H,Q,function(){Y.some(e=>e.path===Ie)||X([V.toFsEntry(Ie,!1)]),De()},function(){(0,l.TQ)(Ie)},function(e){J(e)},function(){Ae()},ae,function(){oe(Ie)},function(){const e=(0,c.extractParentDirectoryPath)(Ie,V?.getDirSeparator()),r=(0,c.extractDirectoryName)(e,V?.getDirSeparator()),t=(0,c.getThumbFileLocationForDirectory)(e,V?.getDirSeparator());pe((0,c.getThumbFileLocationForDirectory)(Ie,V?.getDirSeparator()),t,V.uuid,i("core:thumbAlreadyExists",{directoryName:r})).then(()=>{const i=V.toFsEntry(e,!1);return re({...i,meta:{id:i.uuid,thumbPath:t}}),ne("Thumbnail created for: "+e,"default",!0),!0}).catch(e=>(ne("Thumbnail creation failed.","default",!0),console.log("Error setting Thumb for entry: "+Ie,e),!0))},function(){Le().then(e=>{const r=(0,E.Q3)(e.url,e.name);navigator.clipboard.write(r).then(()=>(ne(i("core:sharingLinkCopied")),!0)).catch(()=>{ne(i("core:sharingLinkFailed"))})})},function(){ye(Ie)},0,function(){return K(Ie,O.ob.propertiesTab)},function(){navigator.camera.getPicture(Be,Se,{destinationType:Camera.DestinationType.FILE_URI,mediaType:Camera.MediaType.PICTURE})},r,function(){Le().then(e=>{if(e&&void 0!==e.url){const i=window.location.href.split("?")[0]+"?"+e.url.split("?")[1];(0,l.SP)(i)}})},function(){1===Y.length?Ce.openThumbsDialog(Y[0]):ue(ce).then(e=>Ce.openThumbsDialog(e))},function(){1===Y.length?Te.openBgndDialog(Y[0]):ue(ce).then(e=>Te.openBgndDialog(e))});return(0,t.jsx)(o.A,{anchorEl:Fe,open:ke,onClose:fe,anchorReference:we&&ve?"anchorPosition":void 0,anchorPosition:we&&ve?{top:we,left:ve}:void 0,children:(0,t.jsx)(h.A,{children:Ne})})}}}]);
//# sourceMappingURL=1133.bundle.js.map