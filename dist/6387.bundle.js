"use strict";(self.webpackChunktagspaces=self.webpackChunktagspaces||[]).push([[6387],{70090:(e,r,t)=>{t.r(r),t.d(r,{default:()=>j});var n=t(74848),a=t(96488),o=t(87729),c=t(38291),i=t(10812),l=t(45575),s=t(34120),u=t(70704),d=t(14562),p=t(36749),g=t(73989),m=t(2788),f=t(55370),h=t(25418),y=t(91799),D=t(87714),x=t(53356),A=t(22944),k=t(77118),C=t(96540),b=t(32389);const j=function(e){const{open:r,onClose:t}=e,{t:j}=(0,b.Bd)(),{renameDirectory:N,renameFile:S}=(0,p.E)(),{currentLocation:R}=(0,u.L)(),{currentDirectoryPath:E}=(0,d.L)(),{lastSelectedEntry:F}=(0,g._)(),[v,w]=(0,C.useState)(!1),T=(0,C.useRef)(!0),I=(0,x.A)(),P=(0,A.A)(I.breakpoints.down("md"));let B,L,H="";F?(({isFile:L}=F),H=L?(0,k.extractFileName)(F.path,R?.getDirSeparator()):(0,k.extractDirectoryName)(F.path,R?.getDirSeparator()),B=F.path):E&&(L=!1,H=(0,k.extractDirectoryName)(E,R?.getDirSeparator()),B=E);const K=(0,C.useRef)(H),[O,W]=(0,C.useReducer)(e=>e+1,0,void 0),q=()=>{if(!T.current){if(t(),L){const e=R?.getDirSeparator(),r=(0,k.extractContainingDirectoryPath)(F.path,e),t=(r&&r!==e?r+e:"")+K.current;return S(B,t,R.uuid)}return N(B,K.current,R.uuid)}},M=(0,n.jsx)(c.A,{disabled:T.current,onClick:q,"data-tid":"confirmRenameEntry",variant:"contained",style:{WebkitAppRegion:"no-drag"},children:j("core:ok")});return(0,n.jsxs)(f.A,{open:r,onClose:t,fullScreen:P,keepMounted:!0,scroll:"paper","aria-labelledby":"draggable-dialog-title",PaperComponent:o.A,onKeyDown:e=>{"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),q())},children:[(0,n.jsx)(s.A,{dialogTitle:j("core:"+(L?"renameFile":"renameDirectory")),closeButtonTestId:"closeRenameEntryTID",onClose:t,actionSlot:M}),(0,n.jsx)(h.A,{children:(0,n.jsxs)(y.A,{fullWidth:!0,error:v,children:[(0,n.jsx)(i.A,{autoFocus:!0,required:!0,error:v,name:"entryName",label:j("core:"+(L?"renameNewFileName":"createNewDirectoryTitleName")),onChange:e=>{K.current=e.target.value,(()=>{const e=T.current;let r;r=L?(0,m.Bj)(K.current):(0,m.KA)(K.current),T.current=r,(r||e!==r)&&(v!==r?w(r):W())})()},onFocus:e=>{if(K.current){e.preventDefault();const{target:r}=e;r.focus();const t=K.current.indexOf(a.A.beginTagContainer),n=K.current.lastIndexOf(".");let o=K.current.length;t>0?o=t:n>0&&(o=n),r.setSelectionRange(0,o)}},defaultValue:K.current,"data-tid":"renameEntryDialogInput"}),(0,n.jsx)(D.A,{children:j("core:"+(L?"fileNameHelp":"directoryNameHelp"))})]})}),!P&&(0,n.jsxs)(l.A,{children:[(0,n.jsx)(c.A,{"data-tid":"closeRenameEntryDialog",onClick:t,children:j("core:cancel")}),M]})]})}}}]);
//# sourceMappingURL=6387.bundle.js.map