/*! For license information please see 7199.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunktagspaces=self.webpackChunktagspaces||[]).push([[7199],{2742:(e,t,n)=>{n.d(t,{A:()=>j});var a=n(74848),r=n(32535),i=n(7544),o=n(8039),l=n(8716),s=n(71872),c=n(14970),d=n(29184),m=n(37603),h=n(12070),u=n(88634),p=n(80467),g=n(41394),f=n(96540),x=n(32389),v=n(69733),A=n(69605);const j=function(e){const{t}=(0,x.Bd)(),{id:n,label:j,aiProvider:y,chosenModel:w,handleChangeModel:z,disabled:M}=e,{removeModel:C,getOllamaClient:b,models:D}=(0,s.v)(),{openConfirmDialog:k}=(0,A.M)(),I=(0,v.d4)(c.n_),[H,_]=(0,f.useState)(y?.id===I?.id?D:[]);(0,f.useEffect)(()=>{y&&"ollama"===y.engine&&b(y.url).then(e=>{(0,l.BZ)(e).then(e=>{e&&JSON.stringify(e)===JSON.stringify(H)||_(e||[])})})},[y,D]);const T=[{name:"llama3.1",model:"llama3.1",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"4,6 GB. The largest language model from Meta, featuring 405 billion parameters. It is one of the leading open-source AI models, capable of understanding and processing information deeply and diversely",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"llama3.2",model:"llama3.2",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"new 1B and 3B lightweight models are designed for seamless integration on mobile and edge devices. With these models, you can build private, personalized AI experiences with minimal latency and resource overhead.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"llama3.2-vision:11b",model:"llama3.2-vision:11b",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"requires least 8GB of VRAM.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"gemma2",model:"gemma2",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"5,4 GB. One of GEMMA2's standout features is its ability to handle and integrate multiple data modalities. Traditional AI models often specialise in a single type of data — text, images, or audio. GEMMA2, however, can process and synthesise information from all these sources simultaneously.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"codegemma",model:"codegemma",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"CodeGemma models are text-to-text and text-to-code decoder-only models and are available as a 7 billion pretrained variant that specializes in code completion and code generation tasks, a 7 billion parameter instruction-tuned variant for code chat and instruction following and a 2 billion parameter pretrained variant.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"llava",model:"llava",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"large multimodal model that is designed to understand and generate content based on both visual inputs (images) and textual instructions.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"tinyllama",model:"tinyllama",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"TinyLlama is a compact model with only 1.1B parameters.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}}];function S(e){return e?(0,p.GP)((0,g.H)(e.modified_at),"yyyy-MM-dd"):""}return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.A,{disabled:M,value:w||"init",onChange:e=>{"customModel"===e.target.value?k(t("core:downloadChatModel"),void 0,e=>{e&&"string"==typeof e&&z(e)},"cancelInstallCustomModel","confirmInstallCustomModel","confirmCustomModelContent",void 0,t("core:model"),"E.g.: llama3.2:1b, further models available on ollama.com/search",t("core:startDownload"),t("core:cancel")):z(e.target.value)},label:j||"",id:n||"selectChatModelId",slotProps:{input:{endAdornment:w&&(0,a.jsx)(u.A,{position:"end",sx:{ml:-12},children:(0,a.jsx)(i.A,{"aria-label":t("core:deleteModel"),onClick:()=>{C(w)},"data-tid":"deleteModelTID",children:(0,a.jsx)(r.YP,{})})})}},children:[(0,a.jsx)(m.A,{value:"init",disabled:!0,children:t("core:chooseModel")}),(0,a.jsx)(m.A,{value:"",disabled:!0,children:t("core:installedAIModel")}),H&&H.length>0?H.map(e=>(0,a.jsxs)(m.A,{value:e.name,title:S(e),children:[" ",(0,a.jsx)(h.A,{children:(0,a.jsx)(r.Aq,{fontSize:"small"})}),e.name," ",(e.size/1073741824).toFixed(2)," GB"]},e.name)):(0,a.jsx)(m.A,{value:"",disabled:!0,children:t("core:noAIModelsInstaller")}),(0,a.jsx)(m.A,{value:"",disabled:!0,children:t("core:exampleInstallableModels")}),T.map(e=>(0,a.jsxs)(m.A,{value:e.name,title:e.details.format,children:[(0,a.jsx)(h.A,{children:(0,a.jsx)(d.A,{fontSize:"small"})}),e.name]},e.name)),(0,a.jsx)(m.A,{value:"",disabled:!0,children:t("core:moreActions")}),(0,a.jsxs)(m.A,{value:"customModel",children:[(0,a.jsx)(h.A,{children:(0,a.jsx)(d.A,{fontSize:"small"})}),t("core:installCustomModel")]})]})})}},3936:(e,t,n)=>{n.d(t,{v:()=>o});var a=n(96540),r=n(20797),i=n(45231);function o(e,t,n,o){(0,a.useImperativeHandle)(e,()=>({update:e=>{const t=n();!o&&t&&t.status===i.qv.Created&&t.action((0,r.yh)(e))},insert:e=>{const t=n();!o&&t&&t.status===i.qv.Created&&t.action((0,r.Yr)(e))},setEditMode:e=>{const a=t(),r=n();a&&r&&a.setReadonly(!e)},getMarkdown:()=>{const e=n();if(!o&&e&&e.status===i.qv.Created)return e.action((0,r.up)())},destroy:()=>{const e=t();e&&e.destroy()}}))}},6868:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(16290),r=n(74848);const i=(0,a.A)((0,r.jsx)("path",{d:"m9.03 3-1.11 7.07h2.62l.7-4.5h2.58L11.8 18.43H9.47L9.06 21h7.27l.4-2.57h-2.35l2-12.86h2.58l-.71 4.5h2.65L22 3zM8 5H4l-.31 2h4zm-.61 4h-4l-.31 2h4zm.92 8h-6L2 19h6zm.62-4h-6l-.31 2h6.01z"}),"Rtt")},17816:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(74848),r=n(96488),i=n(32535),o=n(38291),l=n(66530),s=n(70704),c=n(53431),d=n(22013),m=n(14970),h=n(34477),u=n(35124),p=n(53356),g=n(67172),f=n(77118),x=n(96540),v=n(32389),A=n(69733),j=n(75111);const y=function(e){const{t}=(0,v.Bd)(),{findLocation:n}=(0,s.L)(),{openedEntry:y,openLink:w}=(0,d.s)(),{findLinks:z,checkIndexExist:M,isIndexing:C,createLocationIndex:b}=(0,c.Y)(),D=(0,A.d4)(m.b8),k=(0,x.useRef)([]),I=(0,x.useRef)([]),H=(0,x.useRef)(!1),[_,T]=((0,p.A)(),(0,x.useReducer)(e=>e+1,0,void 0)),S=n(y.locationID);function F(){const e=y.uuid;z(e,S.uuid).then(e=>{I.current=e,H.current=!0,T()})}return(0,x.useEffect)(()=>{if(D===l.ob.linksTab){if(k.current=[],I.current=[],H.current=!1,y.meta?.description){const e=(0,g.extractLinks)(y.meta?.description);e&&e.length>0&&(k.current=e)}T(),S.checkFileEncryptedPromise(y.path).then(e=>{S.getPropertiesPromise(y.path,e,!0).then(e=>{e.links&&e.links.length>0&&(k.current=[...k.current,...e.links],T())})}),M(S.uuid).then(e=>{H.current=e,e&&F()})}},[y,D]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{display:"block",children:k.current&&k.current.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.A,{variant:"caption",children:[t("core:outgoingLinks")," (",t("found in the file content and/or its description"),"):"]}),(0,a.jsx)("br",{}),k.current?.map(e=>(e=>{let t=e.value?e.value:e.href;t=t.split("\\").join("");let l="";if("url"===e.type)try{l=new URL(t).hostname}catch(e){console.log("Error parsing URL: "+e)}else if("tslink"===e.type){const e=new URL(t),a=e.searchParams.get("tslid"),r=e.searchParams.get("tsdpath"),i=e.searchParams.get("tsepath"),o=n(a)?.name;o&&(l=o+" ⇒ "),r?l+=r:i&&(l+=i)}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{"data-tid":"linkTID"+t,tooltip:t,onClick:()=>w(t),variant:"text",startIcon:(0,a.jsx)(j.A,{title:e.type,children:(0,a.jsx)(i.qY,{})}),style:{marginRight:r.A.defaultSpaceBetweenButtons,textTransform:"none",fontWeight:"normal",whiteSpace:"nowrap",overflow:"hidden"},children:l}),(0,a.jsx)("br",{})]})})(e))]})}),(0,a.jsxs)(h.A,{display:"block",children:[(0,a.jsxs)(u.A,{variant:"caption",children:[t("core:incomingLinks")," (",t("full text search should be enabled for this location"),"):"]}),(0,a.jsx)("br",{}),I.current?.length?(0,a.jsx)(a.Fragment,{children:I.current.map(e=>(e=>{let t=e.name;const l=n(e.locationID),s=(0,f.cleanRootPath)(e.path,l.path,l.getDirSeparator()),c=(0,f.generateSharingLink)(e.locationID,s,void 0,e.uuid);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{"data-tid":"linkTID"+e.uuid,tooltip:c,onClick:()=>w(c),variant:"text",startIcon:(0,a.jsx)(j.A,{title:e.path,children:(0,a.jsx)(i.qY,{})}),style:{marginRight:r.A.defaultSpaceBetweenButtons,textTransform:"none",fontWeight:"normal",whiteSpace:"nowrap",overflow:"hidden"},children:t}),(0,a.jsx)("br",{})]})})(e))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{variant:"caption",children:"No incoming links found"}),(0,a.jsx)("br",{})]}),(0,a.jsx)(o.A,{loading:void 0!==C,"data-tid":"generateInboundTID",onClick:function(){b(S).then(()=>F())},startIcon:(0,a.jsx)(i.jf,{}),children:t("core:generateInbound")})]})]})}},29184:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(16290),r=n(74848);const i=(0,a.A)((0,r.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},30880:(e,t,n)=>{n.d(t,{A:()=>j});var a=n(74848),r=n(38291),i=n(13923),o=n(66530),l=n(71872),s=n(70704),c=n(4337),d=n(36749),m=n(69605),h=n(22013),u=n(19825),p=n(14970),g=n(58760),f=n(96540),x=n(32389),v=n(69733),A=n(32535);const j=function(e){const{style:t}=e,{t:n}=(0,x.Bd)(),j=(0,v.wA)(),{findLocation:y}=(0,s.L)(),{openedEntry:w}=(0,h.s)(),{setDescriptionChange:z}=(0,d.E)(),{descriptionGenerate:M}=(0,l.v)(),{setDescription:C,saveDescription:b}=(0,c.o)(),{showNotification:D}=(0,m.M)(),{openAiGenerationDialog:k}=(0,i.P)(),[I,H]=(0,f.useState)(!1),_=(0,v.d4)(p.n_),T=I||!u.C||!_;if(!w||!w.isFile||y(w.locationID)?.isReadOnly)return null;const S=e=>{e&&D("Description for "+w.name+" generated by an AI.")};return(0,a.jsxs)(g.A,{style:{...t},children:[(0,a.jsx)(r.A,{loading:I,disabled:T,"data-tid":"generateDescriptionAITID",style:{borderTopRightRadius:0,borderBottomRightRadius:0},onClick:()=>{H(!0),M(w).then(e=>function(e){if(H(!1),e)return e.uuid===w.uuid?(j(p.o1.setEntryContainerTab(o.ob.descriptionTab)),C(e.meta?.description),b().then(S)):z(e,e.meta?.description).then(S)}(e))},children:n("core:generateDescription")}),(0,a.jsx)(r.A,{disabled:T,"aria-label":n("core:openGenSettings"),"data-tid":"fileContainerPrevFile",onClick:()=>{k("summary",[w])},style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},children:(0,a.jsx)(A.Aq,{fontSize:"small"})})]})}},32273:(e,t,n)=>{n.d(t,{S:()=>r});var a=n(74848);const r=n(96540).forwardRef((e,t)=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",fillRule:"evenodd",viewBox:"0 0 646 854",ref:t,...e,children:[(0,a.jsx)("path",{d:"M140.629.24c-7.969 1.287-17.532 5.456-24.275 10.605-20.413 15.51-36.229 48.428-42.91 89.438-2.514 15.509-4.23 37.026-4.23 53.455 0 19.371 2.268 44.136 5.517 61.239.736 3.801 1.103 7.173.797 7.418-.245.245-3.25 2.697-6.62 5.394-11.525 9.195-24.705 23.356-33.778 36.291-17.41 24.704-28.688 52.78-33.409 83.185-1.839 12.015-2.33 36.29-.858 48.305 3.25 27.708 11.586 51.125 25.87 72.581l4.658 6.927-1.349 2.268c-9.563 16.061-17.716 39.294-21.516 61.607-3.004 17.655-3.372 22.375-3.372 46.037 0 23.847.307 28.567 3.127 45.057 3.371 19.739 10.237 40.642 17.9 54.558 2.513 4.536 8.643 13.976 9.378 14.467.246.122-.49 2.39-1.655 5.026-8.827 19.31-16.367 44.995-19.493 66.635-2.207 14.834-2.514 19.616-2.514 35.248 0 19.922 1.104 29.608 5.272 45.485l.613 2.329h52.535l-1.716-3.249c-10.605-19.616-11.586-56.029-2.452-92.38 4.168-16.797 8.888-29.118 17.716-46.099l5.272-10.298v-6.314c0-5.885-.123-6.559-2.023-10.421-1.472-2.943-3.433-5.456-6.927-8.889-5.947-5.762-10.238-11.831-13.67-19.31-15.08-32.735-18.023-81.346-7.418-122.786 4.414-17.287 11.709-32.673 19.371-41.071 5.21-5.763 7.908-12.199 7.908-18.881 0-6.927-2.452-12.628-7.97-18.574-15.815-16.919-25.562-37.517-29.056-61.485-4.965-34.145 4.046-71.355 24.52-100.84 20.046-28.935 48.183-47.509 79.631-52.474 7.049-1.165 20.229-.981 27.585.368 8.031 1.41 13.057.98 18.207-1.472 6.375-3.003 9.563-6.743 13.302-15.325 3.31-7.662 5.885-11.831 12.812-20.474 8.337-10.36 16.367-17.41 29.24-25.931 14.713-9.624 31.448-16.612 48.122-19.984 6.068-1.226 8.888-1.41 20.229-1.41s14.161.184 20.229 1.41c24.459 4.966 48.735 17.594 68.106 35.493 4.168 3.862 14.16 16.245 17.348 21.395 1.226 2.022 3.372 6.314 4.72 9.501 3.739 8.582 6.927 12.322 13.302 15.325 4.966 2.391 10.176 2.882 17.9 1.594 12.199-2.084 21.578-1.9 33.532.552 40.704 8.214 76.136 41.746 91.829 86.68 13.67 39.416 9.808 80.672-10.544 112.18-3.433 5.334-6.866 9.625-11.831 14.897-10.728 11.463-10.728 25.685-.061 37.455 17.532 19.187 28.505 66.389 25.194 108.012-2.206 27.463-9.256 52.045-18.942 65.96-1.716 2.452-5.271 6.62-7.969 9.195-3.494 3.433-5.455 5.946-6.927 8.889-1.9 3.862-2.023 4.536-2.023 10.421v6.314l5.272 10.298c8.828 16.981 13.548 29.302 17.716 46.099 9.012 35.861 8.215 71.538-2.084 91.829-.858 1.716-1.594 3.31-1.594 3.494 0 .184 11.709.306 26.053.306h25.992l.674-2.636c.368-1.409.981-3.555 1.287-4.781.675-2.697 2.023-10.666 3.127-18.329 1.042-7.724 1.042-36.168 0-44.75-3.923-31.141-10.483-55.845-21.21-79.201-1.165-2.636-1.901-4.904-1.656-5.026.307-.184 2.023-2.636 3.862-5.395 13.364-20.229 21.578-45.669 25.747-79.262 1.103-9.257 1.103-49.041 0-57.93-2.943-22.926-6.498-38.497-12.383-54.251-2.452-6.559-8.95-20.413-11.708-24.888l-1.349-2.268 4.659-6.927c14.283-21.456 22.62-44.873 25.869-72.581 1.471-12.015.981-36.29-.858-48.305-4.782-30.467-16-58.42-33.409-83.185-9.073-12.935-22.253-27.096-33.777-36.291-3.372-2.697-6.376-5.149-6.621-5.394-.306-.245.062-3.617.797-7.418 7.418-38.681 7.172-86.924-.613-124.625-6.743-32.857-19.003-58.971-34.819-74.051C523.209 4.286 510.336-.864 494.888.117c-35.432 2.085-63.998 42.85-75.278 107.093-1.839 10.36-3.432 22.498-3.432 25.808 0 1.287-.246 2.329-.552 2.329-.307 0-2.697-1.226-5.272-2.758-27.34-16.184-57.746-24.827-87.354-24.827-29.608 0-60.014 8.643-87.354 24.827-2.575 1.532-4.965 2.758-5.272 2.758-.306 0-.552-1.042-.552-2.329 0-3.433-1.655-15.938-3.432-25.808-10.238-57.684-33.716-95.875-64.918-105.499C157.181.424 144.982-.434 140.629.24zm10.422 49.899c8.827 6.988 18.635 26.972 24.275 49.347 1.042 4.046 2.145 8.705 2.452 10.421.245 1.656.919 5.395 1.471 8.276 2.391 12.996 3.494 27.034 3.617 44.137l.061 16.858-4.23 6.252-4.229 6.314h-9.87c-11.524 0-22.988 1.472-33.961 4.414-3.923.981-7.724 1.962-8.459 2.146-1.165.245-1.349-.123-2.023-5.15-3.617-27.279-3.433-57.5.552-82.634 4.413-28.014 14.712-53.393 24.765-60.871 2.391-1.778 2.82-1.717 5.579.49zm349.538-.43c6.069 4.476 12.751 16.368 17.716 31.57 9.992 30.406 12.812 72.152 7.54 111.875-.674 5.027-.858 5.395-2.023 5.15-.735-.184-4.536-1.165-8.459-2.146-10.973-2.942-22.437-4.414-33.961-4.414h-9.87l-4.229-6.314-4.23-6.252.061-16.858c.123-23.785 2.33-42.359 7.601-63.018 5.579-22.19 15.448-42.175 24.214-49.163 2.759-2.207 3.188-2.268 5.64-.43z"}),(0,a.jsx)("path",{d:"M313.498 358.237c-13.303 1.288-16.919 1.778-23.295 3.066-10.36 2.145-24.214 6.927-33.838 11.647-33.47 16.367-56.519 43.646-63.569 75.216-1.41 6.253-1.594 8.337-1.594 18.881 0 10.421.184 12.689 1.533 18.635 9.379 41.256 47.385 71.723 96.549 77.301 10.666 1.165 56.765 1.165 67.431 0 39.478-4.475 73.439-25.869 88.703-55.907 4.045-8.03 6.007-13.241 7.846-21.394 1.349-5.946 1.533-8.214 1.533-18.635 0-10.544-.184-12.628-1.594-18.881-10.238-45.853-54.742-81.959-109.3-88.825-7.111-.858-25.746-1.594-30.405-1.104zm22.926 33.348c18.207 1.962 36.536 8.46 51.248 18.268 7.908 5.272 19.065 16.306 23.846 23.54 5.885 8.949 9.256 18.083 10.789 29.179.674 5.088.307 8.95-1.533 17.164-2.881 12.26-11.831 25.072-23.907 34.022-5.64 4.107-17.348 10.054-24.52 12.383-13.609 4.352-22.498 5.149-54.252 4.904-20.719-.184-24.398-.368-30.344-1.471-20.29-3.801-36.351-11.893-47.998-24.214-9.441-9.931-13.732-19.003-16.061-33.654-1.042-6.805.919-18.084 4.904-27.586 4.843-11.586 17.348-25.991 29.731-34.267 14.344-9.563 33.225-16.367 50.573-18.206 6.682-.736 20.842-.736 27.524-.062z"}),(0,a.jsx)("path",{d:"M299.584 436.336c-4.659 2.513-7.908 8.888-6.927 13.608 1.103 5.088 5.578 10.238 12.566 14.468 3.74 2.268 3.985 2.574 4.169 4.842.122 1.349-.368 5.211-1.042 8.644-.736 3.371-1.288 6.927-1.288 7.908.062 2.636 2.514 6.927 5.088 9.011 2.269 1.839 2.698 1.9 9.073 2.084 5.824.184 7.05.061 9.379-1.042 6.008-2.943 7.54-8.337 5.333-18.697-1.839-8.643-1.471-9.992 3.127-12.628 4.842-2.82 9.992-7.785 11.524-11.157 2.943-6.436.245-13.731-6.253-17.103-1.593-.797-3.555-1.164-6.436-1.164-4.475 0-7.356 1.042-12.628 4.413l-3.004 1.901-1.9-1.165c-7.785-4.598-9.195-5.149-13.916-5.088-3.371 0-5.21.306-6.865 1.165zM150.744 365.165c-10.85 3.433-18.942 11.402-23.11 22.743-2.023 5.395-3.004 13.916-2.146 18.513 2.023 10.973 11.034 20.965 21.272 23.724 12.873 3.371 22.497 1.164 31.018-7.295 4.965-4.843 7.663-9.073 10.36-15.939 1.961-4.842 2.084-5.7 2.084-12.566l.061-7.356-2.574-5.272c-4.108-8.337-11.525-14.529-20.107-16.797-4.843-1.226-12.628-1.164-16.858.245zM478.153 364.982c-8.398 2.268-15.877 8.52-19.862 16.735l-2.574 5.272.061 7.356c0 6.866.123 7.724 2.084 12.566 2.698 6.866 5.395 11.096 10.36 15.939 8.521 8.459 18.145 10.666 31.019 7.295 7.417-1.962 14.834-8.215 18.39-15.51 3.065-6.191 3.8-10.666 2.82-17.716-2.268-16.122-11.709-27.83-25.747-31.937-4.107-1.226-12.076-1.226-16.551 0z"})]}))},41394:(e,t,n)=>{n.d(t,{H:()=>o});var a=n(61501),r=n(43329),i=n(29407);function o(e,t){const n=()=>(0,r.w)(t?.in,NaN),o=t?.additionalDigits??2,g=function(e){const t={},n=e.split(l.dateTimeDelimiter);let a;if(n.length>2)return t;if(/:/.test(n[0])?a=n[0]:(t.date=n[0],a=n[1],l.timeZoneDelimiter.test(t.date)&&(t.date=e.split(l.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length))),a){const e=l.timezone.exec(a);e?(t.time=a.replace(e[1],""),t.timezone=e[1]):t.time=a}return t}(e);let f;if(g.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((a[1]||a[2]).length)}}(g.date,o);f=function(e,t){if(null===t)return new Date(NaN);const n=e.match(s);if(!n)return new Date(NaN);const a=!!n[4],r=m(n[1]),i=m(n[2])-1,o=m(n[3]),l=m(n[4]),c=m(n[5])-1;if(a)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,l,c)?function(e,t,n){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=7*(t-1)+n+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+r),a}(t,l,c):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(u[t]||(p(e)?29:28))}(t,i,o)&&function(e,t){return t>=1&&t<=(p(e)?366:365)}(t,r)?(e.setUTCFullYear(t,i,Math.max(r,o)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!f||isNaN(+f))return n();const x=+f;let v,A=0;if(g.time&&(A=function(e){const t=e.match(c);if(!t)return NaN;const n=h(t[1]),r=h(t[2]),i=h(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i)?n*a.s0+r*a.Cg+1e3*i:NaN}(g.time),isNaN(A)))return n();if(!g.timezone){const e=new Date(x+A),n=(0,i.a)(0,t?.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return v=function(e){if("Z"===e)return 0;const t=e.match(d);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,i)?n*(r*a.s0+i*a.Cg):NaN}(g.timezone),isNaN(v)?n():(0,i.a)(x+A+v,t?.in)}const l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},s=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function h(e){return e&&parseFloat(e.replace(",","."))||0}const u=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400==0||e%4==0&&e%100!=0}},46362:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ne});var a=n(74848),r=n(96488),i=n(30880),o=n(40696),l=n(32535),s=n(12048),c=n(75111),d=n(7544),m=n(10812),h=n(71872),u=n(53356),p=n(82777),g=n(96540),f=n(5079),x=n(73989);const v=function(e){const t=(0,u.A)(),{children:n,accepts:i,style:o}=e,{selectedEntries:l}=(0,x._)(),{setImages:s}=(0,h.v)();function c(e){return!!e&&["jpeg","jpg","png","gif","bmp","tiff"].some(t=>e.toLowerCase().endsWith(t))}const[d,m]=(0,f.H)(()=>({accept:i,drop:(e,t)=>{const{files:n,entry:a}=e;if(!t.didDrop()&&r.A.isElectron)if(n&&n.length){const e=n.map(e=>(e.path||(e.path=window.electronIO.ipcRenderer.getPathForFile(e)),e.path));s(e)}else if(a)if(l&&l.length>0&&l.some(e=>e.path===a.path)){const e=l.filter(e=>c(e.path));e.length>0&&s(e.map(e=>e.path))}else a.isFile&&c(a.path)&&s([a.path])},collect:e=>({handlerId:e.getHandlerId(),isActive:e.isOver({shallow:!0})&&e.canDrop()})}),[s,l]),{isActive:g,handlerId:v}=d;return(0,a.jsx)("div",{ref:m,style:{...o,...g&&{boxShadow:"inset 0px 0px 0 5px "+t.palette.primary.main,borderRadius:5,backgroundColor:(0,p.X4)(t.palette.primary.main,.5)}},children:n})};var A=n(51475),j=n(37603),y=n(12070),w=n(15548),z=n(16290);const M=(0,z.A)((0,a.jsx)("path",{d:"M3 5h2V3c-1.1 0-2 .9-2 2m0 8h2v-2H3zm4 8h2v-2H7zM3 9h2V7H3zm10-6h-2v2h2zm6 0v2h2c0-1.1-.9-2-2-2M5 21v-2H3c0 1.1.9 2 2 2m-2-4h2v-2H3zM9 3H7v2h2zm2 18h2v-2h-2zm8-8h2v-2h-2zm0 8c1.1 0 2-.9 2-2h-2zm0-12h2V7h-2zm0 8h2v-2h-2zm-4 4h2v-2h-2zm0-16h2V3h-2zM7 17h10V7H7zm2-8h6v6H9z"}),"SelectAll");var C=n(32389);const b=(0,z.A)((0,a.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}),"FileCopy");var D=n(87653),k=n(6868),I=n(69605);const H=function(e){const{t}=(0,C.Bd)(),{anchorEl:n,handleClose:r,handleSelectAll:i,handleCopy:o,saveAsHtml:s,saveAsMarkdown:c}=e,{deleteHistory:d}=(0,h.v)(),{openConfirmDialog:m}=(0,I.M)();return(0,a.jsxs)(A.A,{anchorEl:n,id:"account-menu",open:Boolean(n),onClose:r,onClick:r,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,a.jsxs)(j.A,{onClick:i,children:[(0,a.jsx)(y.A,{children:(0,a.jsx)(M,{fontSize:"small"})}),t("core:selectAll")]}),(0,a.jsxs)(j.A,{onClick:o,children:[(0,a.jsx)(y.A,{children:(0,a.jsx)(b,{fontSize:"small"})}),t("core:copy")]}),(0,a.jsxs)(j.A,{onClick:()=>{r(),m(t("core:titleConfirm"),t("core:confirmHistoryDeletion"),e=>{e&&d()},"cancelDeleteHistoryDialog","confirmDeleteHistoryDialog","confirmDeleteHistoryDialogContent")},children:[(0,a.jsx)(y.A,{children:(0,a.jsx)(l.d7,{fontSize:"small"})}),t("core:clearHistory")]}),(0,a.jsx)(w.A,{}),(0,a.jsxs)(j.A,{onClick:s,children:[(0,a.jsx)(y.A,{children:(0,a.jsx)(D.A,{fontSize:"small"})}),t("core:saveAsHtml")]}),(0,a.jsxs)(j.A,{onClick:c,children:[(0,a.jsx)(y.A,{children:(0,a.jsx)(k.A,{fontSize:"small"})}),t("core:saveAsMd")]})]})};var _=n(2742),T=n(32273),S=n(92339),F=n(22013),N=n(62231),R=n(45231),L=n(3936),E=n(22177),B=n(80467);const P=g.forwardRef((e,t)=>{const{currentFolder:n,placeholder:i}=e,{openLink:o}=(0,F.s)(),{chatHistoryItems:l}=(0,h.v)(),s=(0,g.useRef)(void 0),{get:c,loading:d}=(0,S.hG)(e=>{const t=(0,N.T)(e,(a=l)?a.map(e=>{const t=e.timestamp?"**User on "+(0,B.GP)(e.timestamp,"yyyy-MM-dd HH:mm:ss")+"**":"**User**",n=e.request?e.request:"",a=e.modelName?e.modelName:"AI model",i=e.response?"**"+a+"**:\\\n"+e.response:"";return t+": \\\n"+n+"\n"+(e.imagePaths?e.imagePaths.map(e=>"![chat image]("+r.A.metaFolder+"/"+r.A.aiFolder+"/"+e+")"):"")+"\n"+i+"\n *** \n"}).join(" "):"",!1,{[E.mA.Feature.BlockEdit]:!1,[E.mA.Feature.Toolbar]:!1,[E.mA.Feature.Placeholder]:!1,[E.mA.Feature.Cursor]:!1},i,n,o);var a;return t.editor.onStatusChange(e=>{e===R.qv.Created&&(console.log(e),s.current=t)}),t},[n,l]);return(0,g.useEffect)(()=>()=>{s.current&&s.current.destroy()},[]),(0,L.v)(t,()=>s.current,c,d),(0,a.jsx)(S.y5,{})});var q=n(14970),U=n(2788);const G=(0,z.A)((0,a.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),V=(0,z.A)((0,a.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var O=n(34477),Y=n(85342),Z=n(8861),$=n(91799),W=n(87714),J=n(88634),K=n(67172),X=n(77118),Q=n(14257),ee=n(69733);const te=function(){const{t:e}=(0,C.Bd)(),t=(0,u.A)(),{images:n,removeImage:r,newChatMessage:i,changeCurrentModel:o,setModel:p,currentModel:f,isTyping:x,cancelMessage:A}=(0,h.v)(),{showNotification:j}=(0,I.M)(),{openedEntry:y}=(0,F.s)(),w=(0,ee.d4)(q.n_),z=(0,g.useRef)(!1),M=(0,g.useRef)(void 0),b=(0,g.useRef)(null),D=(0,g.useRef)(null),k=(0,g.useRef)(void 0),[N,R]=(0,g.useReducer)(e=>e+1,0,void 0),[L,E]=g.useState(null),B=()=>{z.current=!0,R(),i(k.current,!1,"user",M.current,void 0,!0).then(e=>{console.log("newOllamaMessage response:"+e),k.current="",z.current=!1,R()}).catch(e=>{"AbortError"===e.name?console.log("ChatMessage request has been aborted"):console.error("An error occurred:",e)})},{FILE:te}=Q;return(0,a.jsx)(O.A,{sx:{flexGrow:1,margin:0,height:"100%"},children:(0,a.jsxs)(Y.A,{container:!0,spacing:1,direction:"column",wrap:"nowrap",sx:{height:"100%",overflow:"hidden"},children:[(0,a.jsxs)(Y.A,{container:!0,spacing:0,direction:"row",style:{flexFlow:"nowrap"},children:[(0,a.jsx)(Y.A,{size:11.5,children:(0,a.jsx)(_.A,{id:"chatModelId",handleChangeModel:t=>{o(t).then(e=>{e&&p(t)}).catch(n=>{j(e("core:installCustomModel")+n.message+": "+t,"error",!1),console.log(n)})},aiProvider:w,chosenModel:f?.name,label:e("core:selectedAIModel")})}),(0,a.jsxs)(Y.A,{children:[(0,a.jsx)(d.A,{style:{marginTop:20},tooltip:e("core:chatMore"),onClick:e=>{E(e.currentTarget)},"data-tid":"chatMoreTID","aria-label":e("core:chatMore"),"aria-controls":Boolean(L)?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":Boolean(L)?"true":void 0,children:(0,a.jsx)(l.wc,{})}),(0,a.jsx)(H,{anchorEl:L,handleClose:()=>{E(null)},handleSelectAll:()=>{E(null);const e=document.createRange(),t=window.getSelection();D.current&&(e.selectNodeContents(D.current),t.removeAllRanges(),t.addRange(e))},handleCopy:()=>{if(E(null),D.current){const t=D.current.innerText;navigator.clipboard.writeText(t).then(()=>{j(e("core:copyToClipboard"))}).catch(t=>{console.error("Failed to copy text:",t),j(e("core:generatedHTMLFailed"))})}},saveAsHtml:()=>{if(E(null),D.current){const e=D.current.innerHTML,t=new Blob([e],{type:"text/html"}),n="tagspaces-chat [export "+(0,K.formatDateTime4Tag)(new Date,!0)+"].html";(0,U.Nk)(t,n)}},saveAsMarkdown:()=>{if(E(null),b.current){const e=b.current.getMarkdown(),t=new Blob([e],{type:"text/markdown"}),n="tagspaces-chat [export "+(0,K.formatDateTime4Tag)(new Date,!0)+"].md";(0,U.Nk)(t,n)}}})]})]}),(0,a.jsx)(Y.A,{size:"grow",sx:{padding:0,overflowY:"auto"},children:(0,a.jsxs)("div",{className:"chatMD",ref:D,children:[(0,a.jsx)("style",{children:`\n                .chatMD .milkdown .ProseMirror {\n                    padding: 10px;\n                }\n                .chatMD .milkdown .ProseMirror a {\n                    color: ${t.palette.primary.main};\n                }\n                .chatMD .milkdown .ProseMirror img {\n                    max-width: 99%;\n                }\n            `}),(0,a.jsx)(S.pb,{children:(0,a.jsx)(P,{ref:b,currentFolder:y.path})})]})}),(0,a.jsxs)(Y.A,{container:!0,spacing:1,direction:"column",children:[(0,a.jsx)(Y.A,{children:n.length>0&&n.map((t,n)=>(0,a.jsxs)(O.A,{position:"relative",style:{float:"right"},children:[(0,a.jsx)("img",{src:"data:image/"+(0,X.extractFileExtension)(t.path)+";base64,"+t.base64,alt:`Image ${n+1}`,style:{maxHeight:150,width:"auto"}}),(0,a.jsx)(d.A,{size:"small",tooltip:e("core:remove"),onClick:e=>{r(t.uuid)},sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(255, 255, 255, 0.7)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"}},children:(0,a.jsx)(l.US,{fontSize:"small"})})]}))}),(0,a.jsx)(Y.A,{children:(0,a.jsx)(v,{accepts:[te,s.A.FILE],children:(0,a.jsxs)($.A,{fullWidth:!0,children:[(0,a.jsx)(m.A,{autoFocus:!0,disabled:x||z.current,name:"entryName",placeholder:e("core:yourMessageForAI"),onChange:e=>{k.current=e.target.value,R()},value:k.current,onKeyDown:e=>{"Enter"!==e.key&&"Enter"!==e.code||(e.preventDefault(),e.stopPropagation(),B())},slotProps:{input:{startAdornment:(0,a.jsx)(J.A,{position:"start",style:{height:32},children:(0,a.jsx)(c.A,{title:w?.name+" - "+w?.engine,children:(0,a.jsx)(T.S,{height:25})})}),endAdornment:(0,a.jsxs)(J.A,{position:"end",style:{height:32},children:[x&&(0,a.jsx)(Z.A,{size:24,color:"inherit"}),z.current&&(0,a.jsx)(c.A,{title:"Cancel Message",children:(0,a.jsx)(d.A,{onClick:()=>{z.current=!1,A()},children:(0,a.jsx)(G,{})})}),(0,a.jsx)(d.A,{tooltip:e("core:send"),onClick:B,children:(0,a.jsx)(V,{})})]})}}}),(0,a.jsx)(W.A,{children:e("core:aiHelp",{chatModel:f&&"("+f.name+")"})})]})})})]})]})})},ne=function(e){const{openedEntry:t}=(0,F.s)();return(0,ee.d4)(q.n)&&t.isFile?(0,a.jsxs)(O.A,{position:"relative",display:"inline-flex",children:[(0,a.jsx)(i.A,{}),t.meta?.description&&(0,a.jsx)(o.A,{fromDescription:!0,style:{marginLeft:r.A.defaultSpaceBetweenButtons}})]}):(0,a.jsx)(te,{})}},87653:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(16290),r=n(74848);const i=(0,a.A)((0,r.jsx)("path",{d:"M3.5 9H5v6H3.5v-2.5h-2V15H0V9h1.5v2h2zm14 0H13c-.55 0-1 .45-1 1v5h1.5v-4.5h1V14H16v-3.51h1V15h1.5v-5c0-.55-.45-1-1-1M11 9H6v1.5h1.75V15h1.5v-4.5H11zm13 6v-1.5h-2.5V9H20v6z"}),"Html")}}]);
//# sourceMappingURL=7199.bundle.js.map