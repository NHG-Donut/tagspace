"use strict";(self.webpackChunktagspaces=self.webpackChunktagspaces||[]).push([[1352],{2742:(e,t,i)=>{i.d(t,{A:()=>j});var r=i(74848),n=i(32535),a=i(7544),l=i(8039),o=i(8716),s=i(71872),d=i(14970),c=i(29184),u=i(37603),x=i(12070),m=i(88634),p=i(80467),h=i(41394),g=i(96540),A=i(32389),f=i(69733),T=i(69605);const j=function(e){const{t}=(0,A.Bd)(),{id:i,label:j,aiProvider:v,chosenModel:y,handleChangeModel:b,disabled:C}=e,{removeModel:w,getOllamaClient:S,models:D}=(0,s.v)(),{openConfirmDialog:I}=(0,T.M)(),E=(0,f.d4)(d.n_),[P,R]=(0,g.useState)(v?.id===E?.id?D:[]);(0,g.useEffect)(()=>{v&&"ollama"===v.engine&&S(v.url).then(e=>{(0,o.BZ)(e).then(e=>{e&&JSON.stringify(e)===JSON.stringify(P)||R(e||[])})})},[v,D]);const M=[{name:"llama3.1",model:"llama3.1",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"4,6 GB. The largest language model from Meta, featuring 405 billion parameters. It is one of the leading open-source AI models, capable of understanding and processing information deeply and diversely",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"llama3.2",model:"llama3.2",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"new 1B and 3B lightweight models are designed for seamless integration on mobile and edge devices. With these models, you can build private, personalized AI experiences with minimal latency and resource overhead.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"llama3.2-vision:11b",model:"llama3.2-vision:11b",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"requires least 8GB of VRAM.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"gemma2",model:"gemma2",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"5,4 GB. One of GEMMA2's standout features is its ability to handle and integrate multiple data modalities. Traditional AI models often specialise in a single type of data — text, images, or audio. GEMMA2, however, can process and synthesise information from all these sources simultaneously.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"codegemma",model:"codegemma",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"CodeGemma models are text-to-text and text-to-code decoder-only models and are available as a 7 billion pretrained variant that specializes in code completion and code generation tasks, a 7 billion parameter instruction-tuned variant for code chat and instruction following and a 2 billion parameter pretrained variant.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"llava",model:"llava",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"large multimodal model that is designed to understand and generate content based on both visual inputs (images) and textual instructions.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}},{name:"tinyllama",model:"tinyllama",modified_at:new Date,size:1,digest:"",expires_at:new Date,size_vram:0,details:{family:"ollama",format:"TinyLlama is a compact model with only 1.1B parameters.",parent_model:"ollama",families:["ollama"],parameter_size:"",quantization_level:""}}];function k(e){return e?(0,p.GP)((0,h.H)(e.modified_at),"yyyy-MM-dd"):""}return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.A,{disabled:C,value:y||"init",onChange:e=>{"customModel"===e.target.value?I(t("core:downloadChatModel"),void 0,e=>{e&&"string"==typeof e&&b(e)},"cancelInstallCustomModel","confirmInstallCustomModel","confirmCustomModelContent",void 0,t("core:model"),"E.g.: llama3.2:1b, further models available on ollama.com/search",t("core:startDownload"),t("core:cancel")):b(e.target.value)},label:j||"",id:i||"selectChatModelId",slotProps:{input:{endAdornment:y&&(0,r.jsx)(m.A,{position:"end",sx:{ml:-12},children:(0,r.jsx)(a.A,{"aria-label":t("core:deleteModel"),onClick:()=>{w(y)},"data-tid":"deleteModelTID",children:(0,r.jsx)(n.YP,{})})})}},children:[(0,r.jsx)(u.A,{value:"init",disabled:!0,children:t("core:chooseModel")}),(0,r.jsx)(u.A,{value:"",disabled:!0,children:t("core:installedAIModel")}),P&&P.length>0?P.map(e=>(0,r.jsxs)(u.A,{value:e.name,title:k(e),children:[" ",(0,r.jsx)(x.A,{children:(0,r.jsx)(n.Aq,{fontSize:"small"})}),e.name," ",(e.size/1073741824).toFixed(2)," GB"]},e.name)):(0,r.jsx)(u.A,{value:"",disabled:!0,children:t("core:noAIModelsInstaller")}),(0,r.jsx)(u.A,{value:"",disabled:!0,children:t("core:exampleInstallableModels")}),M.map(e=>(0,r.jsxs)(u.A,{value:e.name,title:e.details.format,children:[(0,r.jsx)(x.A,{children:(0,r.jsx)(c.A,{fontSize:"small"})}),e.name]},e.name)),(0,r.jsx)(u.A,{value:"",disabled:!0,children:t("core:moreActions")}),(0,r.jsxs)(u.A,{value:"customModel",children:[(0,r.jsx)(x.A,{children:(0,r.jsx)(c.A,{fontSize:"small"})}),t("core:installCustomModel")]})]})})}},8529:(e,t,i)=>{i.r(t),i.d(t,{default:()=>He});var r=i(74848),n=i(32535),a=i(87729),l=i(41244),o=i(33460),s=i(38291),d=i(96488),c=i(75111),u=i(7544),x=i(50494),m=i(8039),p=i(10812),h=i(2742),g=i(32273),A=i(71872),f=i(19825),T=i(14970),j=i(2788),v=i(75811),y=i(77722),b=i(59636),C=i(37786),w=i(83992),S=i(27519),D=i(38572),I=i(49565),E=i(37603),P=i(8861),R=i(91799),M=i(76320),k=i(34477),_=i(87788),F=i(82181),O=i(88634),U=i(12070),L=i(16738),B=i(35124),z=i(74120),N=i(96540),W=i(32389),G=i(69733);const H=function(e){const{t}=(0,W.Bd)(),{closeSettings:i}=e,{changeCurrentModel:a,checkProviderAlive:l}=(0,A.v)(),o=(0,G.d4)(T.n_),H=(0,G.d4)(T.Nc),[X,K]=N.useReducer(e=>e+1,0,void 0),Y=(0,G.wA)(),V=N.useRef(null),q=N.useRef({}),Q=N.useRef({}),[Z,$]=N.useState(!1),J=f.C?.contextProviders?.AiTemplatesContext?(0,N.useContext)(f.C.contextProviders.AiTemplatesContext):void 0;function ee(){H.map(e=>l(e.url).then(t=>(q.current={...q.current,[e.id]:t},K(),t)))}function te(e,t,i){const r=H.map(r=>r.id===e?{...r,[t]:i}:r);Y(T.o1.setAiProviders(r))}(0,N.useEffect)(()=>{ee()},[]);const ie=void 0!==window.ExtAI,re=e=>(0,r.jsxs)(O.A,{position:"end",style:{flexDirection:"column",marginTop:-70},children:[(0,r.jsx)(s.A,{variant:"text","data-tid":"save"+e+"TID",onClick:()=>function(e){const t=Q.current[e];t&&(J.setTemplate(e,t),Q.current[e]=void 0)}(e),children:t("core:save")}),(0,r.jsx)(s.A,{variant:"text",tooltip:"Resets to the default prompt","data-tid":"reset"+e+"TID",onClick:()=>function(e){const t=J.getDefaultTemplate(e);t&&(J.setTemplate(e,t),Q.current[e]=void 0)}(e),children:t("core:resetBtn")}),(0,r.jsx)(s.A,{variant:"text","data-tid":"cancel"+e+"TID",onClick:()=>function(e){Q.current[e]=void 0,K()}(e),children:t("core:cancel")})]});return(0,r.jsxs)("div",{style:{overflowX:"hidden",overflowY:"auto",height:"100%",padding:10},children:[(0,r.jsxs)(y.A,{defaultExpanded:!0,children:[(0,r.jsx)(b.A,{"aria-controls":"ai-general",id:"ai-general-header","data-tid":"aiGeneralTID",children:(0,r.jsxs)(k.A,{style:{display:"block"},children:[(0,r.jsx)(B.A,{children:t("core:aiSettings")}),(0,r.jsx)("br",{}),(0,r.jsxs)(B.A,{variant:"caption",children:["TagSpaces does not have its own AI engine or models, but relies entirely on external software like Ollama. If you don't have Ollama, you can download it for free from",(0,r.jsx)(s.A,{style:{fontSize:13,textTransform:"unset",fontWeight:"normal",paddingTop:0,paddingBottom:0},variant:"text",onClick:()=>{(0,j.Ui)("https://ollama.com/download",!0)},children:"ollama.com"})," ","and follow the installation instructions to get it set up on your computer."]})]})}),(0,r.jsxs)(C.A,{children:[(0,r.jsx)(w.x,{onClickAway:e=>{V.current&&V.current.contains(e.target)||$(!1)},children:(0,r.jsxs)(k.A,{ref:V,sx:{width:"100%",textAlign:"left",position:"relative"},children:[(0,r.jsx)(s.A,{disabled:ie,"aria-controls":Z?"split-button-menu":void 0,"aria-expanded":Z?"true":void 0,"aria-haspopup":"menu","data-tid":"createNewAIButtonTID",onClick:()=>{$(e=>!e)},startIcon:(0,r.jsx)(n.UW,{}),style:{marginBottom:d.A.defaultSpaceBetweenButtons},children:(0,r.jsx)(k.A,{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:t("core:addAIEngine")})}),(0,r.jsx)(S.A,{sx:{zIndex:1},open:Z,anchorEl:V.current,role:void 0,transition:!0,placement:"bottom-start",disablePortal:!0,children:({TransitionProps:e,placement:t})=>(0,r.jsx)(D.A,{...e,style:{transformOrigin:"bottom"===t?"center top":"center bottom"},children:(0,r.jsx)(I.A,{children:(0,r.jsx)(x.A,{id:"split-button-menu",autoFocusItem:!0,children:(0,r.jsxs)(E.A,{"data-tid":"aiCreateNewTextFileTID",onClick:()=>{(e=>{const t="http://localhost:11434";l(t).then(i=>{const r=(0,z.getUuid)();q.current={...q.current,[r]:i};const n={id:r,engine:e,name:e,url:t,enable:!0};Y(T.o1.addAiProvider(n))})})("ollama"),$(!1)},children:[(0,r.jsx)(U.A,{children:(0,r.jsx)(g.S,{height:30})}),(0,r.jsx)(L.A,{primary:"Ollama"})]},"createNewTextFileTID")})})})})]})}),o&&(0,r.jsx)(m.A,{disabled:ie,value:o?.id,onChange:e=>{const t=e.target.value;Y(T.o1.setAiProvider(t))},label:t("core:defaultAIEngine"),children:H.filter(e=>e.enable).map(e=>(0,r.jsxs)(E.A,{value:e.id,children:[(0,r.jsx)(g.S,{width:10,style:{marginRight:5}}),e.name]},e.id))})]})]}),!o&&(0,r.jsx)(y.A,{defaultExpanded:!0,children:(0,r.jsx)(b.A,{children:(0,r.jsx)(B.A,{variant:"caption",children:"All AI-functionality is currently disabled. Please add and configure an AI-engine in order to use external AIs in TagSpaces."})})}),H.map(e=>(0,r.jsxs)(y.A,{defaultExpanded:!0,children:[(0,r.jsxs)(b.A,{expandIcon:(0,r.jsx)(n.mS,{}),"aria-controls":e.id+"content","data-tid":e.id+"ollamaTID",sx:{"& .MuiAccordionSummary-content":{alignItems:"center"}},children:[(0,r.jsxs)(B.A,{children:[(0,r.jsx)(g.S,{width:15,style:{marginRight:5}}),e.name]}),(0,r.jsx)(c.A,{title:t("core:serviceStatus")+": "+(q.current[e.id]?t("core:available"):t("core:notAvailable")),children:null===q.current[e.id]?(0,r.jsx)(P.A,{size:12}):(0,r.jsx)(v.A,{sx:{color:q.current[e.id]?"green":"red",fontSize:19,ml:1}})}),(0,r.jsx)(u.A,{"aria-label":"removeAIProvider",tooltip:t("core:remove"),onClick:t=>{t.stopPropagation(),confirm('Do you want to remove "'+e.name+'" AI config?')&&Y(T.o1.removeAiProvider(e.id))},"data-tid":"removeAIProviderTID",children:(0,r.jsx)(n.YP,{})})]}),(0,r.jsx)(C.A,{children:(0,r.jsxs)(F.A,{children:[(0,r.jsx)(R.A,{children:(0,r.jsx)(p.A,{disabled:ie,fullWidth:!0,name:"engineName",label:t("core:engineName")+" *","data-tid":"engineTID",value:e.name,onChange:t=>{te(e.id,"name",t.target.value)}})}),(0,r.jsx)(R.A,{children:(0,r.jsx)(p.A,{disabled:ie,fullWidth:!0,name:"ollamaSocket",label:t("core:engineUrl")+" *","data-tid":"ollamaEngineTID",value:e.url,onChange:t=>{te(e.id,"url",t.target.value)},placeholder:"http://localhost:11434",slotProps:{input:{endAdornment:(0,r.jsx)(O.A,{position:"end",style:{height:32},children:(0,r.jsx)(u.A,{tooltip:t("core:refreshServiceStatus"),onClick:()=>{ee()},children:(0,r.jsx)(n.jf,{})})})}}})}),(0,r.jsx)(h.A,{disabled:!q.current[e.id],label:t("core:defaultAImodelText")+" *",handleChangeModel:t=>{te(e.id,"defaultTextModel",t),a(t,i)},aiProvider:e,chosenModel:e.defaultTextModel}),(0,r.jsx)(h.A,{disabled:!q.current[e.id],label:t("core:defaultAImodelImages"),handleChangeModel:t=>{te(e.id,"defaultImageModel",t),a(t,i)},aiProvider:e,chosenModel:e.defaultImageModel}),(0,r.jsx)(_.A,{labelPlacement:"start",style:{justifyContent:"space-between",marginLeft:0},control:(0,r.jsx)(M.A,{"data-tid":"locationIsDefault",name:"isDefault",checked:e.enable,disabled:!q.current[e.id]||ie,onChange:t=>{q.current[e.id]&&te(e.id,"enable",!e.enable)}}),label:t("core:engineEnabled")})]})})]})),f.C&&J&&(0,r.jsxs)(y.A,{children:[(0,r.jsx)(b.A,{expandIcon:(0,r.jsx)(n.mS,{}),"aria-controls":"AdvancedContent","data-tid":"AdvancedTID",sx:{"& .MuiAccordionSummary-content":{alignItems:"center"}},children:(0,r.jsx)(B.A,{children:"Advanced"})}),(0,r.jsxs)(C.A,{children:[(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultQuestionPrompt),label:t("defaultQuestionPrompt"),value:Q.current.DEFAULT_QUESTION_PROMPT??J.getTemplate("DEFAULT_QUESTION_PROMPT"),onChange:e=>{Q.current.DEFAULT_QUESTION_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.DEFAULT_QUESTION_PROMPT&&re("DEFAULT_QUESTION_PROMPT")}}}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultSystemPrompt),label:t("defaultSystemPrompt"),value:Q.current.DEFAULT_SYSTEM_PROMPT??J.getTemplate("DEFAULT_SYSTEM_PROMPT"),onChange:e=>{Q.current.DEFAULT_SYSTEM_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.DEFAULT_SYSTEM_PROMPT&&re("DEFAULT_SYSTEM_PROMPT")}}}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultSystemPrompt),label:t("summarizePrompt"),value:Q.current.SUMMARIZE_PROMPT??J.getTemplate("SUMMARIZE_PROMPT"),onChange:e=>{Q.current.SUMMARIZE_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.SUMMARIZE_PROMPT&&re("SUMMARIZE_PROMPT")}}}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultSystemPrompt),label:t("imageDescription"),value:Q.current.IMAGE_DESCRIPTION_PROMPT??J.getTemplate("IMAGE_DESCRIPTION_PROMPT"),onChange:e=>{Q.current.IMAGE_DESCRIPTION_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.IMAGE_DESCRIPTION_PROMPT&&re("IMAGE_DESCRIPTION_PROMPT")}}}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultSystemPrompt),label:t("imageDescriptionStructured"),value:Q.current.IMAGE_DESCRIPTION_STRUCTURED_PROMPT??J.getTemplate("IMAGE_DESCRIPTION_STRUCTURED_PROMPT"),onChange:e=>{Q.current.IMAGE_DESCRIPTION_STRUCTURED_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.IMAGE_DESCRIPTION_STRUCTURED_PROMPT&&re("IMAGE_DESCRIPTION_STRUCTURED_PROMPT")}}}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultSystemPrompt),label:t("textDescription"),value:Q.current.TEXT_DESCRIPTION_PROMPT??J.getTemplate("TEXT_DESCRIPTION_PROMPT"),onChange:e=>{Q.current.TEXT_DESCRIPTION_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.TEXT_DESCRIPTION_PROMPT&&re("TEXT_DESCRIPTION_PROMPT")}}}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultSystemPrompt),label:t("generateImageTags"),value:Q.current.IMAGE_TAGS_PROMPT??J.getTemplate("IMAGE_TAGS_PROMPT"),onChange:e=>{Q.current.IMAGE_TAGS_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.IMAGE_TAGS_PROMPT&&re("IMAGE_TAGS_PROMPT")}}}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!(void 0===window.ExtDefaultSystemPrompt),label:t("generateTags"),value:Q.current.TEXT_TAGS_PROMPT??J.getTemplate("TEXT_TAGS_PROMPT"),onChange:e=>{Q.current.TEXT_TAGS_PROMPT=e.target.value,K()},slotProps:{input:{endAdornment:Q.current.TEXT_TAGS_PROMPT&&re("TEXT_TAGS_PROMPT")}}})]})]})]})};var X=i(48373),K=i(45575),Y=i(34120),V=i(75031),q=i(55370),Q=i(25418),Z=i(87714),$=i(7527),J=i(53356),ee=i(22944);const te=function(e){const{t}=(0,W.Bd)(),i=(0,G.wA)(),n=(0,N.useRef)(e.tileServer.name),l=(0,N.useRef)(e.tileServer.serverURL),o=(0,N.useRef)(e.tileServer.serverInfo),c=(0,N.useRef)(e.isDefault),u=(0,J.A)(),x=(0,ee.A)(u.breakpoints.down("md")),{open:m,onClose:h}=e,{setError:g,haveError:A}=(0,V.A)(),f=()=>n.current?(g("name",!1),!0):(g("name"),!1);return(0,r.jsxs)(q.A,{open:m,fullScreen:x,keepMounted:!0,scroll:"paper",PaperComponent:x?I.A:a.A,onClose:h,children:[(0,r.jsx)(Y.A,{dialogTitle:t(e.tileServer.uuid?"core:tileServerDialogEdit":"core:tileServerDialogAdd"),closeButtonTestId:"closeMapTileServerTID",onClose:h}),(0,r.jsxs)(Q.A,{children:[(0,r.jsx)(R.A,{fullWidth:!0,error:A("name"),children:(0,r.jsx)(p.A,{error:A("name"),autoFocus:!0,name:"name",label:t("core:tileServerNameTitle"),onChange:e=>{const{target:t}=e;n.current=t.value,f()},retrieveValue:()=>n.current,defaultValue:n.current,"data-tid":"tileServerNameTID"})}),(0,r.jsxs)(R.A,{fullWidth:!0,children:[(0,r.jsx)(p.A,{name:"serverURL",label:t("core:tileServerUrlTitle"),onChange:e=>{const{target:t}=e;l.current=t.value},retrieveValue:()=>l.current,defaultValue:l.current,"data-tid":"tileServerUrlTID"}),(0,r.jsx)(Z.A,{style:{marginLeft:0,marginTop:0,marginBottom:10},children:t("core:tileServerUrlHelp")})]}),(0,r.jsx)(R.A,{fullWidth:!0,children:(0,r.jsx)(p.A,{name:"serverInfo",label:t("core:tileServerInfoTitle"),onChange:e=>{const{target:t}=e;o.current=t.value},retrieveValue:()=>o.current,defaultValue:o.current,"data-tid":"tileserverInfoTID"})}),(0,r.jsxs)($.Ay,{style:{paddingLeft:0,paddingRight:0},children:[(0,r.jsx)(L.A,{primary:t("core:serverIsDefaultHelp")}),(0,r.jsx)(M.A,{"data-tid":"serverIsDefaultTID",onClick:()=>{c.current=!c.current},defaultChecked:c.current})]})]}),(0,r.jsxs)(K.A,{style:{justifyContent:e.tileServer.uuid?"space-between":"flex-end"},children:[e.tileServer.uuid&&(0,r.jsx)(s.A,{style:{marginLeft:10},"data-tid":"deleteTileServerTID",onClick:()=>{i(T.o1.deleteTileServer(e.tileServer.uuid)),e.onClose()},children:t("core:delete")}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.A,{"data-tid":"closeTileServerDialogTID",onClick:e.onClose,children:t("core:closeButton")}),(0,r.jsx)(s.A,{"data-tid":"saveTileServerDialogTID",onClick:()=>{f()&&(e.tileServer.uuid?i(T.o1.editTileServers({uuid:e.tileServer.uuid,name:n.current,serverInfo:o.current,serverURL:l.current},c.current)):i(T.o1.addTileServers({uuid:e.tileServer.uuid,name:n.current,serverInfo:o.current,serverURL:l.current},c.current)),e.onClose())},style:{marginLeft:d.A.defaultSpaceBetweenButtons},variant:"contained",children:t("core:confirmSaveButton")})]})]})]})};var ie=i(24586),re=i(26494),ne=i(69605),ae=i(3427),le=i(63410),oe=i(29608),se=i(30073);const de=function(e){const{t}=(0,W.Bd)(),{delAllHistory:i}=(0,re.l)(),{openConfirmDialog:a}=(0,ne.M)(),o=(0,G.wA)(),x=(0,G.d4)(T.mt),h=(0,G.d4)(T.C$),g=(0,G.d4)(T.Lb),A=(0,G.d4)(T.n),[y,b]=(0,N.useState)(void 0),C=(0,N.useRef)(null),[w,S]=(0,N.useReducer)(e=>e+1,0,void 0);function D(e){e&&a(t("core:confirm"),t("core:confirm"+e+"Deletion"),t=>{t&&i(e)},"cancelDelete"+e+"Dialog","confirmDelete"+e+"Dialog","confirmDelete"+e+"DialogContent")}(0,N.useEffect)(()=>{d.A.isElectron&&(0,j.Sz)().then(e=>{C.current=e,S()})},[x.enableWS]);const I=(e,t,i)=>{e.preventDefault(),e.stopPropagation(),b({...t,isDefault:i})},R=void 0!==d.A.geoTaggingFormat,k=(e,t)=>o(T.o1.setHistory(e,t));return(0,r.jsxs)(se.A,{style:{overflowX:"hidden",overflowY:"auto",height:"100%"},children:[(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(s.A,{"data-tid":"resetSettingsTID",onClick:()=>a(t("core:confirm"),t("core:confirmResetSettings"),e=>{e&&((0,ae.OO)(),localStorage.clear(),d.A.isElectron?window.electronIO.ipcRenderer.sendMessage("reloadWindow"):window.location.reload())},"cancelResetSettingsDialogTID","confirmResetSettingsDialogTID","confirmResetSettingsDialogContentTID"),color:"secondary",style:{marginLeft:-7},children:t("core:resetSettings")}),(0,r.jsx)(s.A,{"data-tid":"reloadAppTID",style:{marginLeft:d.A.defaultSpaceBetweenButtons},onClick:()=>{d.A.isElectron?window.electronIO.ipcRenderer.sendMessage("reloadWindow"):window.location.reload()},color:"secondary",children:t("core:reloadApplication")})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("enableMobileMode")}),(0,r.jsx)(M.A,{"data-tid":"settingsSetDesktopMode",disabled:!(void 0===window.ExtDisplayMode),onClick:()=>{return e=!x.desktopMode,o(T.o1.setDesktopMode(e));var e},checked:!x.desktopMode})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("enableWS")}),d.A.isElectron&&(0,r.jsx)(c.A,{title:t("core:serviceStatus")+": "+(C.current?t("core:available"):t("core:notAvailable")),children:null===C.current?(0,r.jsx)(P.A,{size:12}):(0,r.jsx)(v.A,{sx:{color:C.current?"green":"red",fontSize:19,ml:1}})}),(0,r.jsx)(M.A,{"data-tid":"settingsEnableWS",disabled:!d.A.isElectron,onClick:()=>{return e=!x.enableWS,o(T.o1.setEnableWS(e));var e},checked:x.enableWS})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("warningOpeningFilesExternally")}),(0,r.jsx)(M.A,{"data-tid":"warningOpeningFilesExternally",onClick:()=>{return e=!x.warningOpeningFilesExternally,o(T.o1.setWarningOpeningFilesExternally(e));var e},checked:x.warningOpeningFilesExternally})]}),A&&(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:tagDelimiter")}),(0,r.jsxs)(m.A,{"data-tid":"tagDelimiterTID",fullWidth:!1,title:t("core:tagDelimiter"),value:x.tagDelimiter,onChange:e=>a(t("core:confirm"),t("core:tagDelimiterChange"),t=>{t&&o(T.o1.setTagDelimiter(e.target.value))},"cancelTagDelimiterChangeDialog","confirmTagDelimiterChangeDialog","confirmTagDelimiterChangeContent"),children:[(0,r.jsx)(E.A,{value:" ",children:t("core:space")}),(0,r.jsx)(E.A,{value:",",children:","}),(0,r.jsx)(E.A,{value:"_",children:"_"})]})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:prefixTagContainer")}),(0,r.jsx)(p.A,{style:{maxWidth:"100px"},"data-tid":"prefixTagContainerTID",value:x.prefixTagContainer,onChange:e=>{return t=e.target.value,o(T.o1.setPrefixTagContainer(t));var t}})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:maxCollectedTag")}),(0,r.jsx)(p.A,{type:"number",slotProps:{input:{inputMode:"numeric",min:0}},style:{maxWidth:"92px"},"data-tid":"prefixTagContainerTID",value:h,onChange:e=>o(T.o1.setMaxCollectedTag(""===e.target.value?void 0:Number(e.target.value)))})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:fileOpenHistory")}),(0,r.jsx)(U.A,{children:(0,r.jsx)(u.A,{tooltip:t("clearHistory"),"aria-label":t("core:clearHistory"),onClick:()=>D(ie.zU.fileOpenKey),"data-tid":"clearSearchTID",children:(0,r.jsx)(n.d7,{})})}),(0,r.jsxs)(m.A,{"data-tid":"fileOpenTID",fullWidth:!1,title:t("core:fileOpenHistoryTitle"),value:x[ie.zU.fileOpenKey],onChange:e=>k(ie.zU.fileOpenKey,e.target.value),children:[(0,r.jsx)(E.A,{value:0,children:t("core:disabled")}),(0,r.jsx)(E.A,{value:10,children:"10"}),(0,r.jsx)(E.A,{value:50,children:"50"}),(0,r.jsx)(E.A,{value:100,children:"100"})]})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:folderOpenHistory")}),(0,r.jsx)(U.A,{children:(0,r.jsx)(u.A,{tooltip:t("clearHistory"),"aria-label":t("core:clearHistory"),onClick:()=>D(ie.zU.folderOpenKey),"data-tid":"clearSearchTID",children:(0,r.jsx)(n.d7,{})})}),(0,r.jsxs)(m.A,{"data-tid":"folderOpenTID",fullWidth:!1,title:t("core:folderOpenHistoryTitle"),value:x[ie.zU.folderOpenKey],onChange:e=>k(ie.zU.folderOpenKey,e.target.value),children:[(0,r.jsx)(E.A,{value:0,children:t("core:disabled")}),(0,r.jsx)(E.A,{value:10,children:"10"}),(0,r.jsx)(E.A,{value:50,children:"50"}),(0,r.jsx)(E.A,{value:100,children:"100"})]})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:fileEditHistory")}),(0,r.jsx)(U.A,{children:(0,r.jsx)(u.A,{tooltip:t("clearHistory"),"aria-label":t("core:clearHistory"),onClick:()=>D(ie.zU.fileEditKey),"data-tid":"clearSearchTID",children:(0,r.jsx)(n.d7,{})})}),(0,r.jsxs)(m.A,{"data-tid":"fileEditTID",fullWidth:!1,title:t("core:fileEditHistoryTitle"),value:x[ie.zU.fileEditKey],onChange:e=>k(ie.zU.fileEditKey,e.target.value),children:[(0,r.jsx)(E.A,{value:0,children:t("core:disabled")}),(0,r.jsx)(E.A,{value:10,children:"10"}),(0,r.jsx)(E.A,{value:50,children:"50"}),(0,r.jsx)(E.A,{value:100,children:"100"})]})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:searchHistory")}),(0,r.jsx)(U.A,{children:(0,r.jsx)(u.A,{tooltip:t("clearHistory"),"aria-label":t("core:clearHistory"),onClick:()=>D(ie.zU.searchHistoryKey),"data-tid":"clearSearchTID",children:(0,r.jsx)(n.d7,{})})}),(0,r.jsxs)(m.A,{"data-tid":"searchHistoryTID",fullWidth:!1,title:t("core:searchHistoryTitle"),value:x[ie.zU.searchHistoryKey],onChange:e=>k(ie.zU.searchHistoryKey,e.target.value),children:[(0,r.jsx)(E.A,{value:0,children:t("core:disabled")}),(0,r.jsx)(E.A,{value:10,children:"10"}),(0,r.jsx)(E.A,{value:50,children:"50"}),(0,r.jsx)(E.A,{value:100,children:"100"})]})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:(0,r.jsxs)(r.Fragment,{children:[t("setRevisionsEnabled"),(0,r.jsx)(X.A,{tooltip:t("core:setRevisionsEnabledHelp")}),(0,r.jsx)(l.ad,{})]})}),(0,r.jsx)(M.A,{"data-tid":"setRevisionsEnabledTID",disabled:!f.C,onClick:()=>{return e=!x.isRevisionsEnabled,o(T.o1.setRevisionsEnabled(e));var e},checked:x.isRevisionsEnabled})]}),(0,r.jsxs)($.Ay,{title:void 0!==window.ExtUseLocationTags?t("core:settingExternallyConfigured"):"",children:[(0,r.jsx)(L.A,{primary:(0,r.jsxs)(r.Fragment,{children:[t("enableTagsFromLocation"),(0,r.jsx)(X.A,{tooltip:t("core:enableTagsFromLocationHelp")}),(0,r.jsx)(l.ad,{})]})}),(0,r.jsx)(M.A,{"data-tid":"saveTagInLocationTID",disabled:void 0!==window.ExtUseLocationTags,onClick:()=>{var e;f.C&&(e=!x.saveTagInLocation,o(T.o1.setSaveTagInLocation(e)))},checked:void 0!==window.ExtUseLocationTags?window.ExtUseLocationTags:x.saveTagInLocation})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:geoTaggingFormat")}),(0,r.jsx)(m.A,{disabled:R,fullWidth:!1,"data-tid":"geoTaggingFormatTID",title:R?t("core:settingExternallyConfigured"):"",value:R?d.A.geoTaggingFormat:x.geoTaggingFormat,onChange:e=>{return t=e.target.value,o(T.o1.setGeoTaggingFormat(t));var t},children:x.supportedGeoTagging.map(e=>(0,r.jsx)(E.A,{value:e,children:e.toUpperCase()},e))})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:tileServerTitle")}),(0,r.jsx)(s.A,{onClick:e=>I(e,{},!0),children:t("tileServerDialogAdd")})]}),(0,r.jsx)(se.A,{style:{padding:5,paddingLeft:10,backgroundColor:"#d3d3d34a",borderRadius:d.A.defaultCSSRadius},dense:!0,children:g.length>0?g.map((e,i)=>(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:e.name,secondary:e.serverURL,style:{maxWidth:470}}),(0,r.jsx)(u.A,{"aria-label":t("core:options"),"aria-haspopup":"true",edge:"end","data-tid":"tileServerEdit_"+e.name,onClick:t=>I(t,e,0===i),children:(0,r.jsx)(oe.A,{})}),0===i&&(0,r.jsx)(c.A,{title:t("core:serverIsDefaultHelp"),children:(0,r.jsx)(le.A,{"data-tid":"tileServerDefaultIndication",style:{marginLeft:10}})})]},e.uuid)):(0,r.jsx)($.Ay,{children:(0,r.jsx)(L.A,{primary:t("core:noTileServersTitle"),secondary:t("core:addTileServersHelp")})},"noTileServers")}),y&&(0,r.jsx)(te,{open:void 0!==y,onClose:()=>b(void 0),tileServer:y,isDefault:y.isDefault}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:(0,r.jsxs)(r.Fragment,{children:[t("core:author"),(0,r.jsx)(X.A,{tooltip:"The value of this text field can be used for example in the templates as {author} variable. If you do not want this, just delete it from here."})]})}),(0,r.jsx)(p.A,{disabled:void 0!==window.ExtAuthor,title:window.ExtAuthor?t("core:settingExternallyConfigured"):"","data-tid":"authorTID",value:window.ExtAuthor?window.ExtAuthor:x.author,onChange:e=>{return t=e.target.value,o(T.o1.setAuthor(t));var t},slotProps:{input:{endAdornment:(0,r.jsx)(O.A,{position:"end",children:(0,r.jsx)(c.A,{title:t("loadDefaultAuthor"),children:(0,r.jsx)(u.A,{"data-tid":"loadDefaultAuthorTID",disabled:void 0!==window.ExtAuthor,onClick:()=>o(T.o1.setAuthor(void 0)),children:(0,r.jsx)(n.jf,{})})})})}}})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:(0,r.jsxs)(r.Fragment,{children:[t("enableDevMode"),(0,r.jsx)(X.A,{tooltip:"Will enable some experimental features and turn on extra debugging"})]})}),(0,r.jsx)(M.A,{"data-tid":"settingsEnableDevMode",disabled:window.ExtDevMode&&!0===window.ExtDevMode,onClick:()=>(e=>o(T.o1.setDevMode(e)))(!A),checked:A})]})]})};var ce=i(96984),ue=i(70704),xe=i(42086);const me=()=>(0,N.useContext)(xe.O);var pe=i(36749),he=i(95124),ge=i(82139),Ae=i(88629);const fe=function(){const{t:e}=(0,W.Bd)(),{extensions:t,removeExtension:i,enableExtension:n}=me(),{openConfirmDialog:a}=(0,ne.M)(),{findLocalLocation:l}=(0,ue.L)(),{uploadFilesAPI:o}=(0,pe.E)(),{openFileUploadDialog:c}=(0,ce.m)(),x=(0,N.useRef)(null),m=(0,G.d4)(T.n),p=(0,G.wA)(),h=(e,t,i)=>{p(he.o1.onUploadProgress(e,t,i))};return(0,r.jsxs)("div",{style:{overflowX:"hidden",overflowY:"auto",height:"100%",padding:10},children:[(0,r.jsxs)(y.A,{defaultExpanded:!0,children:[(0,r.jsxs)(b.A,{expandIcon:(0,r.jsx)(Ae.A,{}),"aria-controls":"internal-content",id:"internal-header",children:[(0,r.jsx)(B.A,{style:{fontWeight:"bold"},children:e("core:coreExtensions")}),(0,r.jsx)(X.A,{tooltip:"These are extensions which are packaged with the current version of the app"})]}),(0,r.jsx)(C.A,{children:(0,r.jsx)(se.A,{children:t&&t.filter(e=>!e.extensionExternal).map(e=>(0,r.jsxs)($.Ay,{disablePadding:!0,children:[e.extensionName," ",(0,r.jsxs)("small",{style:{marginLeft:5},children:["v",e.version]})]},e.extensionId))})})]}),(0,r.jsxs)(y.A,{defaultExpanded:!0,children:[(0,r.jsxs)(b.A,{expandIcon:(0,r.jsx)(Ae.A,{}),"aria-controls":"installed-content",id:"installed-header",children:[(0,r.jsx)(B.A,{style:{fontWeight:"bold"},children:e("core:thirdPartyExtensions")}),(0,r.jsx)(X.A,{tooltip:"Extensions manually installed on top of the current app installation"})]}),(0,r.jsxs)(C.A,{children:[(0,r.jsx)(se.A,{children:t&&t.filter(e=>e.extensionExternal).map(t=>(0,r.jsxs)($.Ay,{disablePadding:!0,children:[t.extensionName," ",(0,r.jsxs)("small",{style:{marginLeft:5},children:["v",t.version]}),(0,r.jsx)(M.A,{"data-tid":"enableExtensionTID",name:"enableExtension",checked:t.extensionEnabled,onChange:e=>{const i=t.extensionId.endsWith("/build")?t.extensionId.slice(0,-6):t.extensionId;e.target.checked?(n(i,!0),(0,j.tF)()):n(i,!1)}}),(0,r.jsx)(u.A,{tooltip:e("core:removeExtension"),"aria-label":e("core:delete"),onClick:()=>{!function(t){t&&a(e("core:removeExtension"),e("core:removeExtensionTooltip",{extensionName:t.extensionName}),e=>{e&&(p(T.o1.removeSupportedFileTypes(t.extensionId)),i(t.extensionId))},"cancelRemoveExtDialogTID","confirmRemoveExtDialogTID","confirmRemoveExtDialogContentTID")}(t)},"data-tid":"removeExtensionTID",children:(0,r.jsx)(ge.A,{color:"action"})})]},t.extensionId))}),t&&t.filter(e=>e.extensionExternal).length<1&&(0,r.jsx)(B.A,{variant:"subtitle1",children:"No extensions found"}),m&&d.A.isElectron&&(0,r.jsxs)(k.A,{style:{textAlign:"center"},children:[(0,r.jsx)(s.A,{"data-tid":"installExtensionTID",onClick:()=>x.current.click(),color:"secondary",children:e("core:installExtension")}),(0,r.jsx)("input",{style:{display:"none"},ref:x,accept:"zip",type:"file",onChange:e=>{let t=Array.from(e.currentTarget.files);d.A.isElectron&&(t=t.map(e=>(e.path||(e.path=window.electronIO.ipcRenderer.getPathForFile(e)),e))),(0,j.tX)().then(e=>{p(he.o1.resetProgress()),c();const i=e+d.A.dirSeparator+"tsplugins",r=l();o(t,i,h,!1,!1,r.uuid,r.uuid).then(e=>{const t=i+d.A.dirSeparator+"@tagspaces"+d.A.dirSeparator+"extensions",n=e.map(e=>(0,j.bt)(e.path,t+d.A.dirSeparator+e.name));return Promise.all(n).then(e=>((0,j.tF)(),e.forEach(e=>r.deleteFilePromise(e)),!0))}).catch(e=>(console.log("uploadFiles",e),!0))})}})]})]})]})]})};var Te=i(59572),je=i(7036),ve=i(32262),ye=i(58060),be=i(62796),Ce=i(54026),we=i(51361),Se=i(94963),De=i(96120),Ie=i(78828),Ee=i(71163);const Pe=function(){const{t:e}=(0,W.Bd)(),{extensions:t}=me(),{openConfirmDialog:i}=(0,ne.M)(),a=(0,G.d4)(T.As),l=(0,N.useRef)(a),o=(0,N.useRef)(void 0),c=(0,N.useRef)(!1),[x,h]=(0,N.useState)(!1),g=(0,N.useRef)(null),[A,f]=(0,N.useReducer)(e=>e+1,0,void 0),v=(0,be.A)(),y=(0,G.d4)(T.n),b=(0,G.wA)();function C(e){if(e){const t=l.current.findIndex(t=>t.type===e.type);if(t>-1)return setTimeout(function(){!function({index:e,align:t="start"}){g.current&&g.current.scrollToIndex({index:e,align:t})}({index:t})},50)}}(0,N.useEffect)(()=>{if(!v&&(l.current=a,c.current=!1,void 0!==o.current)){const e=C(o.current);return()=>{e&&clearTimeout(e)}}},[a]);const w=(e,t,i,r=!1)=>{let n,a;e.id?(n="id",a=e.id):(n="type",a=e.type);let s=!1,d=!1;const u=l.current.map(e=>{if(e[n]===a){s=""!==e.type||"type"===t&&""!==i,d=""!==e.viewer;const r={...e,[t]:i};return o.current=r,r}return e});l.current=u,"type"!==t&&s&&!r||"type"===t&&d&&s&&!r?S(u):(c.current=!0,f())},S=e=>{if(c.current=!0,!D(e))return f(),!1;b(T.o1.setSupportedFileTypes(e))},D=e=>{let t=!0;return e.map(e=>{const i=l.current.filter(t=>t.type===e.type).length>1;return t&&(""===e.type||""===e.viewer||i)&&(t=!1),e}),t},P=[{width:"130px",label:e("core:fileExtension"),dataKey:"type"},{width:"170px",label:e("core:fileOpener"),dataKey:"viewer"},{width:"170px",label:e("core:fileEditor"),dataKey:"editor"}],M={Scroller:N.forwardRef((e,t)=>(0,r.jsx)(De.A,{component:I.A,...e,ref:t})),Table:e=>(0,r.jsx)(Ce.A,{...e,sx:{borderCollapse:"separate",tableLayout:"fixed"}}),TableRow:({item:e,...t})=>(0,r.jsx)(Ie.A,{...t}),TableBody:N.forwardRef((e,t)=>(0,r.jsx)(we.A,{...e,ref:t}))};return(0,r.jsxs)(I.A,{"data-tid":"settingsFileTypesTID",style:{height:500,width:"100%",minWidth:350,overflow:"hidden",background:"transparent",paddingLeft:10},children:[(0,r.jsx)(s.A,{"data-tid":"addNewFileTypeTID",onClick:()=>{const e={id:(0,z.getUuid)(),type:"",viewer:"",editor:"",color:"#2196f3"};l.current=[e,...l.current],f()},color:"secondary",style:{marginTop:d.A.defaultSpaceBetweenButtons,marginBottom:d.A.defaultSpaceBetweenButtons},children:e("core:addNewFileType")}),y&&(0,r.jsx)(s.A,{"data-tid":"resetFileTypesTID",onClick:()=>{o.current=void 0,l.current=ve.A.supportedFileTypes,b(T.o1.setSupportedFileTypes(a))},color:"secondary",style:{margin:d.A.defaultSpaceBetweenButtons},children:e("core:resetFileType")}),(0,r.jsx)(Ee.Sd,{style:{overflowX:"auto",height:"calc(100% - 50px)",minWidth:350,overflowY:"auto",background:"transparent"},data:l.current,components:M,fixedHeaderContent:function(){return(0,r.jsx)(Ie.A,{children:P.map(e=>(0,r.jsx)(Se.A,{variant:"head",align:"center",sx:{width:e.width,padding:0,paddingLeft:2,backgroundColor:"background.paper"},children:e.label},e.dataKey))})},itemContent:function(a,x){return(0,r.jsxs)(N.Fragment,{children:[(0,r.jsx)(Se.A,{align:"left",sx:{maxWidth:160,padding:"0 5px 0px 5px"},children:(0,r.jsx)(R.A,{error:c.current&&""===x.type||l.current.filter(e=>e.type===x.type).length>1,children:(0,r.jsx)(p.A,{"data-tid":"typeTID"+x.type,defaultValue:x.type,style:{width:160,marginTop:0},error:c.current&&""===x.type||l.current.filter(e=>e.type===x.type).length>1,onBlur:e=>{const t=e.target.value.replace(/[^a-zA-Z0-9 ]/g,"");w(x,"type",t)},slotProps:{input:{startAdornment:(0,r.jsx)(O.A,{position:"start",children:(0,r.jsx)(Te.A,{children:(0,r.jsxs)(s.A,{tooltip:e("core:colorPickerDialogTitle"),"data-tid":"settingsFileTypes_openColorPicker_",style:{border:"1px solid lightgray",backgroundColor:`${x.color}`,minWidth:40},onClick:()=>{var e;e=x,h(!0),o.current=e,C(e)},children:[" ",(0,r.jsx)("div",{})]})})}),endAdornment:(0,r.jsx)(O.A,{position:"end",children:(0,r.jsx)(u.A,{tooltip:e("removeFileType",{itemType:x.type}),"data-tid":"settingsFileTypes_remove_",onClick:()=>(t=>{o.current=t,i(e("core:confirm"),e("core:confirmFileTypeDeletion"),e=>{e&&(e=>{const t=l.current.filter(t=>t.type!==e.type);l.current=t,S(t)})(o.current)},"cancelDeleteFileTypeDialog","confirmDeleteFileTypeDialog","confirmDeleteFileTypeDialogContent")})(x),children:(0,r.jsx)(n.YP,{})})})}}})})}),(0,r.jsx)(Se.A,{align:"center",sx:{minWith:150,padding:"0 5px 0px 25px"},children:(0,r.jsx)(R.A,{fullWidth:!0,error:c.current&&""===x.viewer,children:(0,r.jsx)(m.A,{"data-tid":"viewerTID"+x.type,error:c.current&&""===x.viewer,value:x.viewer,style:{minWidth:150,marginTop:0},onChange:e=>{const i=t.find(t=>t.extensionId===e.target.value);i.extensionExternal&&(0,j.tX)().then(e=>{const t=e+d.A.dirSeparator+"tsplugins";w(x,"extensionExternalPath",t)}),w(x,"viewer",i.extensionId)},children:t.map(e=>(e.extensionTypes.includes("viewer")||e.extensionTypes.includes("editor"))&&(0,r.jsx)(E.A,{"data-tid":(0,ye.B)(e.extensionName+"viewerTID"+x.type),value:e.extensionId,title:"v"+e.version,children:e.extensionName},e.extensionName))})})}),(0,r.jsx)(Se.A,{align:"center",sx:{padding:"0 5px 0px 0"},children:(0,r.jsx)(R.A,{fullWidth:!0,error:c.current,children:(0,r.jsxs)(m.A,{value:x.editor,style:{minWidth:150,marginTop:0},onChange:e=>w(x,"editor",e.target.value),children:[(0,r.jsx)(E.A,{value:"",children:e("clearEditor")}),t.filter(e=>e.extensionTypes&&e.extensionTypes.includes("editor")).map(e=>(0,r.jsx)(E.A,{value:e.extensionId,title:"v"+e.version,children:e.extensionName},e.extensionName))]})})})]})},ref:g}),(0,r.jsx)(je.A,{open:x,setColor:e=>{w(o.current,"color",e)},onClose:()=>{h(!1)},color:o.current&&o.current.color})]})};var Re=i(23987),Me=i(86735),ke=i(14562),_e=i(1532),Fe=i(78377);const Oe=function(){const{i18n:e,t}=(0,W.Bd)(),{openCurrentDirectory:i}=(0,ke.L)(),[n,a]=(0,N.useState)(!1),[o,c]=(0,N.useState)(!1),u=(0,G.wA)(),x=(0,G.d4)(T.mt),h=(0,G.d4)(T.Q$),g=(0,G.d4)(T.bf),A=()=>{a(!n)},f=()=>{c(!o)};let v=_e.xo.UNSPECIFIED;return x.defaultPerspective&&(v=x.defaultPerspective),(0,r.jsxs)(se.A,{style:{overflowX:"hidden",overflowY:"auto",height:"100%"},children:[(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:interfaceLanguage")}),(0,r.jsx)(m.A,{"data-tid":"settingsSetLanguage",fullWidth:!1,value:x.interfaceLanguage,onChange:t=>e.changeLanguage(t.target.value).then(()=>(u(T.o1.setLanguage(t.target.value)),(0,j.xC)(t.target.value),!0)),children:x.supportedLanguages.map(e=>(0,r.jsx)(E.A,{value:e.iso,children:e.title},e.iso))})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:themeSelector")}),(0,r.jsx)(m.A,{"data-tid":"settingsSetCurrentTheme",fullWidth:!1,value:x.currentTheme,onChange:e=>u(T.o1.setCurrentTheme(e.target.value)),children:x.supportedThemes.map(e=>(0,r.jsxs)(E.A,{value:e,children:["light"===e&&t("core:regularScheme"),"dark"===e&&t("core:darkScheme"),"system"===e&&t("core:systemScheme")]},e))})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:themeRegularSelector")}),(0,r.jsx)(m.A,{"data-tid":"settingsCurrentRegularThemeTID",fullWidth:!1,value:x.currentRegularTheme,onChange:e=>u(T.o1.setCurrentRegularTheme(e.target.value)),children:x.supportedRegularThemes.map(e=>(0,r.jsx)(E.A,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:themeDarkSelector")}),(0,r.jsx)(m.A,{"data-tid":"settingsCurrentDarkThemeTID",fullWidth:!1,value:x.currentDarkTheme,onChange:e=>u(T.o1.setCurrentDarkTheme(e.target.value)),children:x.supportedDarkThemes.map(e=>(0,r.jsx)(E.A,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("createLocationDefaultPerspective")}),(0,r.jsx)(Re.A,{fullWidth:!1,onChange:e=>{const t=e.target.value;u(T.o1.setDefaultPerspective(t))},defaultValue:v,testId:"changePerspectiveInSettingsTID"})]}),(0,r.jsxs)($.Ay,{title:d.A.useSidecarsForFileTaggingDisableSetting?t("core:settingExternallyConfigured"):"",children:[(0,r.jsx)(L.A,{primary:t("core:fileTaggingSetting")}),d.A.useSidecarsForFileTaggingDisableSetting?(0,r.jsx)(s.A,{disabled:!0,children:t(h?"core:useSidecarFile":"core:renameFile")}):(0,r.jsxs)(Fe.A,{value:h,size:"small",exclusive:!0,children:[(0,r.jsx)(Me.A,{value:!1,"data-tid":"settingsSetPersistTagsInFileName",style:{borderTopRightRadius:0,borderBottomRightRadius:0},onClick:()=>u(T.o1.setPersistTagsInSidecarFile(!1)),children:(0,r.jsxs)("div",{style:{display:"flex",textTransform:"unset"},children:[!h&&(0,r.jsx)(le.A,{})," ",t("core:renameFile"),"  ",(0,r.jsx)(X.A,{tooltip:t("core:tagsInFilenameExplanation")})]})}),(0,r.jsx)(Me.A,{value:!0,"data-tid":"settingsSetPersistTagsInSidecarFile",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>u(T.o1.setPersistTagsInSidecarFile(!0)),children:(0,r.jsxs)("div",{style:{display:"flex"},children:[h&&(0,r.jsx)(le.A,{})," ",t("core:useSidecarFile"),"  ",(0,r.jsx)(X.A,{tooltip:t("core:tagsInSidecarFileExplanation")})]})})]})]}),!h&&(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:fileNameTagSetting")}),(0,r.jsxs)(Fe.A,{value:g,size:"small",exclusive:!0,children:[(0,r.jsx)(Me.A,{value:!1,"data-tid":"fileNameBeginningTagTID",style:{borderTopRightRadius:0,borderBottomRightRadius:0},onClick:()=>u(T.o1.setFileNameTagPlace(!1)),children:(0,r.jsxs)("div",{style:{display:"flex"},children:[!g&&(0,r.jsx)(le.A,{})," ",t("core:atTheBeginningOfFileName"),"  ",(0,r.jsx)(X.A,{tooltip:t("core:fileNameBeginTagPlaceExplanation")})]})}),(0,r.jsx)(Me.A,{value:!0,"data-tid":"fileNameEndTagTID",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>u(T.o1.setFileNameTagPlace(!0)),children:(0,r.jsxs)("div",{style:{display:"flex"},children:[g&&(0,r.jsx)(le.A,{})," ",t("core:filenameTagPlacedAtEnd"),"  ",(0,r.jsx)(X.A,{tooltip:t("core:fileNameEndTagPlaceExplanation")})]})})]})]}),(0,r.jsxs)($.Ay,{title:void 0!==window.ExtCheckForUpdatesOnStartup?t("core:settingExternallyConfigured"):"",children:[(0,r.jsx)(L.A,{primary:t("core:checkForNewVersionOnStartup")}),(0,r.jsx)(M.A,{disabled:void 0!==window.ExtCheckForUpdatesOnStartup,"data-tid":"settingsSetCheckForUpdates",onClick:()=>u(T.o1.setCheckForUpdates(!x.checkForUpdates)),checked:void 0!==window.ExtCheckForUpdatesOnStartup?window.ExtCheckForUpdatesOnStartup:x.checkForUpdates})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:(0,r.jsxs)(r.Fragment,{children:[t("core:reorderTags"),(0,r.jsx)(l.Xc,{})]})}),(0,r.jsx)(M.A,{"data-tid":"reorderTagsTID",onClick:()=>u(T.o1.reorderTags(!x.reorderTags)),checked:x.reorderTags})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:addTagsToLibrary")}),(0,r.jsx)(M.A,{"data-tid":"settingsSetAddTagsToLibrary",onClick:()=>u(T.o1.setAddTagsToLibrary(!x.addTagsToLibrary)),checked:x.addTagsToLibrary})]}),(0,r.jsxs)($.Ay,{title:void 0!==window.ExtUseOnlyTagsFromTagLibrary?t("core:settingExternallyConfigured"):"",children:[(0,r.jsx)(L.A,{primary:t("core:useOnlyTagsFromTagLibrary")}),(0,r.jsx)(M.A,{disabled:void 0!==window.ExtUseOnlyTagsFromTagLibrary,"data-tid":"useOnlyTagsFromTagLibraryTID",onClick:()=>u(T.o1.setUseOnlyTagsFromTagLibrary(!x.useOnlyTagsFromTagLibrary)),checked:void 0!==window.ExtUseOnlyTagsFromTagLibrary?window.ExtUseOnlyTagsFromTagLibrary:x.useOnlyTagsFromTagLibrary})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:useGenerateThumbnails")}),(0,r.jsx)(M.A,{disabled:void 0!==d.A.useGenerateThumbnails,"data-tid":"settingsUseGenerateThumbnails",onClick:()=>u(T.o1.setUseGenerateThumbnails(!x.useGenerateThumbnails)),checked:void 0!==d.A.useGenerateThumbnails?d.A.useGenerateThumbnails:x.useGenerateThumbnails})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:tagBackgroundColor")}),(0,r.jsx)(Te.A,{children:(0,r.jsx)(s.A,{"data-tid":"settingsToggleDefaultTagBackgroundColor",style:{backgroundColor:x.tagBackgroundColor,border:"1px solid lightgray"},onClick:A,children:" "})}),n&&(0,r.jsx)(je.A,{open:n,setColor:e=>{u(T.o1.setTagColor(e))},onClose:A,color:x.tagBackgroundColor})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:tagForegroundColor")}),(0,r.jsx)(Te.A,{children:(0,r.jsx)(s.A,{"data-tid":"settingsToggleDefaultTagForegroundColor",style:{border:"1px solid lightgray",backgroundColor:x.tagTextColor},onClick:f,children:" "})}),o&&(0,r.jsx)(je.A,{open:o,setColor:e=>{u(T.o1.setTagTextColor(e))},onClose:f,color:x.tagTextColor})]}),d.A.isElectron&&(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:(0,r.jsxs)(B.A,{children:[t("core:useTrashCan"),(0,r.jsx)(X.A,{tooltip:t("core:useTrashCanInfo")})]})}),(0,r.jsx)(M.A,{"data-tid":"settingsSetUseTrashCan",onClick:()=>u(T.o1.setUseTrashCan(!x.useTrashCan)),checked:x.useTrashCan})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:showUnixHiddenFiles")}),(0,r.jsx)(M.A,{"data-tid":"settingsSetShowUnixHiddenEntries",onClick:()=>{u(T.o1.toggleShowUnixHiddenEntries()),i(!x.showUnixHiddenEntries)},checked:x.showUnixHiddenEntries})]}),(0,r.jsxs)($.Ay,{children:[(0,r.jsx)(L.A,{primary:t("core:maxSearchResultChoose")}),(0,r.jsx)(p.A,{style:{maxWidth:"100px"},type:"number","data-tid":"settingsMaxSearchResult",value:x.maxSearchResult,onChange:e=>{u(T.o1.setMaxSearchResult(e.target.value))}})]})]})};var Ue=i(67172);const Le=function(){const{t:e}=(0,W.Bd)(),t=(0,G.d4)(T.OS),i=(0,G.d4)(T.VD),n=(0,G.wA)();return(0,r.jsxs)("div",{style:{overflowX:"hidden",overflowY:"auto",height:"100%",marginLeft:10},children:[(0,r.jsxs)(B.A,{variant:"body2",style:{marginBottom:10},children:["The following key names can be used for defining key bindings:"," ",(0,r.jsx)(B.A,{variant:"overline",children:"ctrl, command, alt, option, shift, space, backspace, escape, enter, up, down, left, right"})," ","plus letters and digits from your keyboard."]}),d.A.isElectron&&(0,r.jsxs)($.Ay,{style:{paddingLeft:0,paddingRight:0},children:[(0,r.jsx)(L.A,{primary:(0,r.jsxs)(r.Fragment,{children:[e("core:enableGlobalKeyboardShortcuts"),(0,r.jsx)(X.A,{tooltip:"Enables global shortcut for creating new files, file navigation, play/pause audio files or opening the search. Global shortcuts are working even if the app window is not currently in focus or visible."})]})}),(0,r.jsx)(M.A,{onClick:()=>{var e;e=!i,n(T.o1.setGlobalKeyBinding(e)),(0,j.hx)(e)},checked:i})]}),t.map(t=>{const i=ve.A.keyBindings.filter(e=>e.name===t.name)[0];return(0,r.jsx)(p.A,{style:{marginTop:0,marginBottom:10},autoComplete:"off",onBlur:e=>{return i=t.name,r=e.target.value,void n(T.o1.setKeyBinding(i,r));var i,r},label:e("core:"+t.name),placeholder:"suggested binding: "+(i?i.command:""),defaultValue:(0,Ue.isStr)(t.command)?t.command:""},t.name)})]})};var Be=i(64951),ze=i(41975),Ne=i(14057),We=i(76365);const Ge=function(e){const{t}=(0,W.Bd)(),{showNotification:i}=(0,ne.M)(),a=N.useRef(void 0),[o,c]=N.useReducer(e=>e+1,0,void 0),x=f.C?.contextProviders?.FileTemplatesContext?(0,N.useContext)(f.C.contextProviders.FileTemplatesContext):void 0,m=x?.getTemplates()??[d.A.defaultTemplate];function h(e){if(x)if(e&&a.current)x.setTemplate(e,a.current),a.current=void 0,c();else{const e=(0,z.getUuid)(),t=d.A.defaultTemplate,i={id:e,name:"new template",content:t.content,fileNameTmpl:t.fileNameTmpl};a.current=i,x.setTemplate(e,i),c()}else i("Adding new file template is Pro feature","default",!0)}function g(e){return a.current&&a.current.id===e.id?a.current:e}function A(e,t){if(!x)return;const i={...e,...a.current};if(i.type===t){const{type:e,...t}=i;a.current=t}else a.current={...i,type:t};c()}return(0,r.jsxs)("div",{style:{overflowX:"hidden",overflowY:"auto",height:"100%",padding:10},children:[(0,r.jsxs)(y.A,{defaultExpanded:!0,children:[(0,r.jsxs)(b.A,{"aria-controls":"file-template-content",id:"file-template-header","data-tid":"fileTemplatesTID",children:[(0,r.jsx)(B.A,{children:t("core:templatesTab")}),(0,r.jsx)(l.ad,{}),(0,r.jsx)(X.A,{tooltip:!!window.ExtFileTemplates&&"Template functionalities are disabled because templates are externally configured"})]}),(0,r.jsxs)(C.A,{children:[(0,r.jsxs)(B.A,{variant:"caption",style:{display:"block",marginTop:-20,marginBottom:10},children:["Supported template variables in the template content are:"," ",(0,r.jsxs)("b",{children:["{","date","}"]}),","," ",(0,r.jsxs)("b",{children:["{","time","}"]}),","," ",(0,r.jsxs)("b",{children:["{","author","}"]})," ","and"," ",(0,r.jsxs)("b",{children:["{","createdInApp","}"]}),". The file name template supports"," ",(0,r.jsxs)("b",{children:["{","timestamp","}"]})," ","and"," ",(0,r.jsxs)("b",{children:["{","uuid","}"]}),". The last one will generate a unique identifier so the new file will get an unique name."]}),(0,r.jsx)(s.A,{disabled:!!window.ExtFileTemplates,onClick:()=>{h()},style:{marginBottom:10},startIcon:(0,r.jsx)(n.UW,{}),children:t("addTemplate")}),(0,r.jsx)(We.A,{disabled:!!window.ExtFileTemplates}),(0,r.jsx)(We.A,{disabled:!!window.ExtFileTemplates,fileType:"md"}),(0,r.jsx)(We.A,{disabled:!!window.ExtFileTemplates,fileType:"txt"}),(0,r.jsx)(We.A,{disabled:!!window.ExtFileTemplates,fileType:"html"})]})]}),m&&m.map(e=>(0,r.jsxs)(y.A,{defaultExpanded:a.current&&a.current.id===e.id,children:[(0,r.jsxs)(b.A,{expandIcon:(0,r.jsx)(n.mS,{}),"aria-controls":e.id+"content","data-tid":e.id+"TemplateTID",sx:{"& .MuiAccordionSummary-content":{alignItems:"center"}},children:[(0,r.jsxs)(B.A,{children:[g(e).name,e.type?(0,r.jsx)("span",{style:{marginLeft:5,padding:2,fontSize:12,textTransform:"uppercase",border:"1px solid gray",borderRadius:"3px"},children:e.type}):"",x?.getTemplate(e.type)?.id===e.id?" - "+t("defaultTemplate"):""]}),(0,r.jsx)(u.A,{disabled:!f.C||!!window.ExtFileTemplates,"aria-label":"removeTemplate",tooltip:t("core:remove"),onClick:t=>{var i;t.stopPropagation(),confirm('Do you want to remove "'+e.name+'"?')&&(i=e.id,x&&i&&(x.delTemplate(i),c()))},"data-tid":"removeAIProviderTID",children:(0,r.jsx)(n.YP,{})}),a.current&&a.current.id===e.id&&(0,r.jsxs)(r.Fragment,{children:[a.current.name&&a.current.fileNameTmpl&&(0,r.jsx)(s.A,{variant:"text","data-tid":"save"+e.id+"TID",onClick:()=>h(e.id),children:t("core:save")}),(0,r.jsx)(s.A,{variant:"text","data-tid":"cancel"+e.id+"TID",onClick:()=>(a.current=void 0,void c()),children:t("core:cancel")})]})]}),(0,r.jsxs)(C.A,{children:[(0,r.jsx)(p.A,{fullWidth:!0,disabled:!f.C||!!window.ExtFileTemplates,label:t("name"),error:!g(e).name,value:g(e).name,onChange:t=>{x&&(a.current={...e,...a.current,name:t.target.value},c())}}),!g(e).name&&(0,r.jsx)(Z.A,{sx:{marginTop:0,color:"red"},children:t("core:templateNameEmptyError")}),(0,r.jsxs)(Fe.A,{value:g(e).type,exclusive:!0,style:{marginTop:10,marginBottom:10},title:"Template type",children:[(0,r.jsx)(Me.A,{value:!1,"data-tid":"templateMdTypeTID",style:{borderTopRightRadius:0,borderBottomRightRadius:0},onClick:()=>A(e,"md"),children:(0,r.jsxs)("div",{style:{display:"flex",textTransform:"unset"},children:["md"===g(e).type&&(0,r.jsx)(le.A,{}),"  MD  "]})}),(0,r.jsx)(Me.A,{value:!1,"data-tid":"templateTxtTypeTID",style:{borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>A(e,"txt"),children:(0,r.jsxs)("div",{style:{display:"flex",textTransform:"unset"},children:["txt"===g(e).type&&(0,r.jsx)(le.A,{})," TXT "]})}),(0,r.jsx)(Me.A,{value:!1,"data-tid":"templateTxtTypeTID",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>A(e,"html"),children:(0,r.jsxs)("div",{style:{display:"flex",textTransform:"unset"},children:["html"===g(e).type&&(0,r.jsx)(le.A,{}),"HTML"]})})]}),(0,r.jsx)(p.A,{fullWidth:!0,multiline:!0,rows:5,disabled:!f.C||!!window.ExtFileTemplates,label:t("core:templateContent"),value:g(e).content,onChange:t=>{x&&(a.current={...e,...a.current,content:t.target.value},c())}}),(0,r.jsx)(p.A,{fullWidth:!0,disabled:!f.C||!!window.ExtFileTemplates,error:!g(e).fileNameTmpl,label:t("fileNameTmpl"),placeholder:"e.g.: note[{timestamp}] or {uuid}",value:g(e).fileNameTmpl,onChange:t=>{x&&(a.current={...e,...a.current,fileNameTmpl:t.target.value},c())}}),!g(e).fileNameTmpl&&(0,r.jsx)(Z.A,{sx:{marginTop:0,color:"red"},children:t("core:fileNameEmptyError")})]})]}))]})},He=function(e){const{t}=(0,W.Bd)(),[i,d]=(0,N.useState)(0),{open:c,onClose:u}=e,x=(0,J.A)(),m=(0,ee.A)(x.breakpoints.down("md")),p=(0,r.jsx)(s.A,{onClick:()=>(0,j.Ui)(Ne.A.documentationLinks.settings,!0),color:"secondary",style:{WebkitAppRegion:"no-drag"},children:t("core:help")}),h=(0,r.jsxs)(Q.A,{style:{overflowY:"hidden",overflowX:"hidden",display:m?"block":"flex",flexGrow:1,padding:m?0:"0 20px"},children:[(0,r.jsxs)(ze.A,{value:i,onChange:(e,t)=>{d(t)},indicatorColor:"primary",scrollButtons:"auto",variant:m?"scrollable":"standard",orientation:m?"horizontal":"vertical",children:[(0,r.jsx)(Be.A,{style:{textTransform:"unset",justifyContent:"flex-start"},iconPosition:"start",icon:m?"":(0,r.jsx)(n.mE,{}),"data-tid":"generalSettingsDialog",label:t("core:generalTab")}),(0,r.jsx)(Be.A,{style:{textTransform:"unset",justifyContent:"flex-start"},iconPosition:"start",icon:m?"":(0,r.jsx)(n.oS,{}),"data-tid":"fileTypeSettingsDialog",label:t("core:fileTypeTab")}),(0,r.jsx)(Be.A,{style:{textTransform:"unset",justifyContent:"flex-start"},iconPosition:"start",icon:m?"":(0,r.jsx)(n.Fq,{}),"data-tid":"keyBindingsSettingsDialog",label:t("core:keyBindingsTab")}),(0,r.jsx)(Be.A,{style:{textTransform:"unset",justifyContent:"flex-start"},iconPosition:"start",icon:m?"":(0,r.jsx)(n.BV,{}),"data-tid":"extensionsSettingsDialog",label:t("core:extensionsTab")}),(0,r.jsx)(Be.A,{style:{textTransform:"unset",justifyContent:"flex-start"},iconPosition:"start",icon:m?"":(0,r.jsx)(n.lL,{}),"data-tid":"advancedSettingsDialogTID",label:t("core:advancedSettingsTab")}),(0,r.jsx)(Be.A,{style:{textTransform:"unset",justifyContent:"flex-start"},"data-tid":"aiSettingsDialogTID",iconPosition:"start",icon:m?"":(0,r.jsx)(n.Aq,{}),label:(0,r.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[t("core:aiSettingsTab"),(0,r.jsx)(l.Xc,{})]})}),(0,r.jsx)(Be.A,{style:{textTransform:"unset",justifyContent:"flex-start"},"data-tid":"templatesDialogTID",iconPosition:"start",icon:m?"":(0,r.jsx)(o.A,{}),label:(0,r.jsx)("span",{style:{whiteSpace:"nowrap"},children:t("core:templatesTab")})})]}),(0,r.jsxs)("div",{"data-tid":"settingsDialog",style:{height:m?"calc(100% - 50px)":"100%",minHeight:400,width:m?"100%":600},children:[0===i&&(0,r.jsx)(Oe,{}),1===i&&(0,r.jsx)(Pe,{}),2===i&&(0,r.jsx)(Le,{}),3===i&&(0,r.jsx)(fe,{}),4===i&&(0,r.jsx)(de,{}),5===i&&(0,r.jsx)(H,{closeSettings:u}),6===i&&(0,r.jsx)(Ge,{})]})]});return(0,r.jsxs)(q.A,{sx:{"& .MuiDialog-paper":{maxWidth:"unset",height:"100%"}},fullScreen:m,PaperComponent:m?I.A:a.A,open:c,keepMounted:!0,scroll:"paper",onClose:u,style:{maxWidth:"auto"},children:[(0,r.jsx)(Y.A,{dialogTitle:t("core:settings"),closeButtonTestId:"closeSettingsTID",onClose:u,actionSlot:p}),h,!m&&(0,r.jsxs)(K.A,{style:{justifyContent:"space-between"},children:[p,(0,r.jsx)(s.A,{"data-tid":"closeSettingsDialog",onClick:e.onClose,children:t("core:closeButton")})]})]})}},23987:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(74848),n=i(41244),a=i(8039),l=i(1532),o=i(19825),s=i(14970),d=i(217),c=i(12070),u=i(16738),x=i(37603),m=i(32389),p=i(69733);const h=function(e){const{defaultValue:t,onChange:i,testId:h,label:g,fullWidth:A=!0}=e,f=(0,p.d4)(s.n),{t:T}=((0,p.d4)(s.ML),(0,m.Bd)()),j=[];return j.push((0,r.jsx)(x.A,{style:{display:"flex"},value:l.xo.UNSPECIFIED,children:(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(c.A,{style:{paddingLeft:3,paddingTop:3},children:(0,r.jsx)(d.A,{})}),(0,r.jsx)(u.A,{children:T("core:unspecified")})]})},l.xo.UNSPECIFIED)),l.xl.forEach(e=>{if(!f&&e.id===l.xo.CALENDAR)return;let t=!0;o.C||!0!==e.pro||(t=!1),t&&j.push((0,r.jsx)(x.A,{value:e.id,children:(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(c.A,{style:{paddingLeft:3,paddingTop:3},children:e.icon}),(0,r.jsxs)(u.A,{children:[e.title," ",e.beta&&(0,r.jsx)(n.Xc,{})]})]})},e.key))}),(0,r.jsx)(a.A,{"data-tid":h,defaultValue:t,onChange:i,label:g,fullWidth:A,children:j})}},32273:(e,t,i)=>{i.d(t,{S:()=>n});var r=i(74848);const n=i(96540).forwardRef((e,t)=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",fillRule:"evenodd",viewBox:"0 0 646 854",ref:t,...e,children:[(0,r.jsx)("path",{d:"M140.629.24c-7.969 1.287-17.532 5.456-24.275 10.605-20.413 15.51-36.229 48.428-42.91 89.438-2.514 15.509-4.23 37.026-4.23 53.455 0 19.371 2.268 44.136 5.517 61.239.736 3.801 1.103 7.173.797 7.418-.245.245-3.25 2.697-6.62 5.394-11.525 9.195-24.705 23.356-33.778 36.291-17.41 24.704-28.688 52.78-33.409 83.185-1.839 12.015-2.33 36.29-.858 48.305 3.25 27.708 11.586 51.125 25.87 72.581l4.658 6.927-1.349 2.268c-9.563 16.061-17.716 39.294-21.516 61.607-3.004 17.655-3.372 22.375-3.372 46.037 0 23.847.307 28.567 3.127 45.057 3.371 19.739 10.237 40.642 17.9 54.558 2.513 4.536 8.643 13.976 9.378 14.467.246.122-.49 2.39-1.655 5.026-8.827 19.31-16.367 44.995-19.493 66.635-2.207 14.834-2.514 19.616-2.514 35.248 0 19.922 1.104 29.608 5.272 45.485l.613 2.329h52.535l-1.716-3.249c-10.605-19.616-11.586-56.029-2.452-92.38 4.168-16.797 8.888-29.118 17.716-46.099l5.272-10.298v-6.314c0-5.885-.123-6.559-2.023-10.421-1.472-2.943-3.433-5.456-6.927-8.889-5.947-5.762-10.238-11.831-13.67-19.31-15.08-32.735-18.023-81.346-7.418-122.786 4.414-17.287 11.709-32.673 19.371-41.071 5.21-5.763 7.908-12.199 7.908-18.881 0-6.927-2.452-12.628-7.97-18.574-15.815-16.919-25.562-37.517-29.056-61.485-4.965-34.145 4.046-71.355 24.52-100.84 20.046-28.935 48.183-47.509 79.631-52.474 7.049-1.165 20.229-.981 27.585.368 8.031 1.41 13.057.98 18.207-1.472 6.375-3.003 9.563-6.743 13.302-15.325 3.31-7.662 5.885-11.831 12.812-20.474 8.337-10.36 16.367-17.41 29.24-25.931 14.713-9.624 31.448-16.612 48.122-19.984 6.068-1.226 8.888-1.41 20.229-1.41s14.161.184 20.229 1.41c24.459 4.966 48.735 17.594 68.106 35.493 4.168 3.862 14.16 16.245 17.348 21.395 1.226 2.022 3.372 6.314 4.72 9.501 3.739 8.582 6.927 12.322 13.302 15.325 4.966 2.391 10.176 2.882 17.9 1.594 12.199-2.084 21.578-1.9 33.532.552 40.704 8.214 76.136 41.746 91.829 86.68 13.67 39.416 9.808 80.672-10.544 112.18-3.433 5.334-6.866 9.625-11.831 14.897-10.728 11.463-10.728 25.685-.061 37.455 17.532 19.187 28.505 66.389 25.194 108.012-2.206 27.463-9.256 52.045-18.942 65.96-1.716 2.452-5.271 6.62-7.969 9.195-3.494 3.433-5.455 5.946-6.927 8.889-1.9 3.862-2.023 4.536-2.023 10.421v6.314l5.272 10.298c8.828 16.981 13.548 29.302 17.716 46.099 9.012 35.861 8.215 71.538-2.084 91.829-.858 1.716-1.594 3.31-1.594 3.494 0 .184 11.709.306 26.053.306h25.992l.674-2.636c.368-1.409.981-3.555 1.287-4.781.675-2.697 2.023-10.666 3.127-18.329 1.042-7.724 1.042-36.168 0-44.75-3.923-31.141-10.483-55.845-21.21-79.201-1.165-2.636-1.901-4.904-1.656-5.026.307-.184 2.023-2.636 3.862-5.395 13.364-20.229 21.578-45.669 25.747-79.262 1.103-9.257 1.103-49.041 0-57.93-2.943-22.926-6.498-38.497-12.383-54.251-2.452-6.559-8.95-20.413-11.708-24.888l-1.349-2.268 4.659-6.927c14.283-21.456 22.62-44.873 25.869-72.581 1.471-12.015.981-36.29-.858-48.305-4.782-30.467-16-58.42-33.409-83.185-9.073-12.935-22.253-27.096-33.777-36.291-3.372-2.697-6.376-5.149-6.621-5.394-.306-.245.062-3.617.797-7.418 7.418-38.681 7.172-86.924-.613-124.625-6.743-32.857-19.003-58.971-34.819-74.051C523.209 4.286 510.336-.864 494.888.117c-35.432 2.085-63.998 42.85-75.278 107.093-1.839 10.36-3.432 22.498-3.432 25.808 0 1.287-.246 2.329-.552 2.329-.307 0-2.697-1.226-5.272-2.758-27.34-16.184-57.746-24.827-87.354-24.827-29.608 0-60.014 8.643-87.354 24.827-2.575 1.532-4.965 2.758-5.272 2.758-.306 0-.552-1.042-.552-2.329 0-3.433-1.655-15.938-3.432-25.808-10.238-57.684-33.716-95.875-64.918-105.499C157.181.424 144.982-.434 140.629.24zm10.422 49.899c8.827 6.988 18.635 26.972 24.275 49.347 1.042 4.046 2.145 8.705 2.452 10.421.245 1.656.919 5.395 1.471 8.276 2.391 12.996 3.494 27.034 3.617 44.137l.061 16.858-4.23 6.252-4.229 6.314h-9.87c-11.524 0-22.988 1.472-33.961 4.414-3.923.981-7.724 1.962-8.459 2.146-1.165.245-1.349-.123-2.023-5.15-3.617-27.279-3.433-57.5.552-82.634 4.413-28.014 14.712-53.393 24.765-60.871 2.391-1.778 2.82-1.717 5.579.49zm349.538-.43c6.069 4.476 12.751 16.368 17.716 31.57 9.992 30.406 12.812 72.152 7.54 111.875-.674 5.027-.858 5.395-2.023 5.15-.735-.184-4.536-1.165-8.459-2.146-10.973-2.942-22.437-4.414-33.961-4.414h-9.87l-4.229-6.314-4.23-6.252.061-16.858c.123-23.785 2.33-42.359 7.601-63.018 5.579-22.19 15.448-42.175 24.214-49.163 2.759-2.207 3.188-2.268 5.64-.43z"}),(0,r.jsx)("path",{d:"M313.498 358.237c-13.303 1.288-16.919 1.778-23.295 3.066-10.36 2.145-24.214 6.927-33.838 11.647-33.47 16.367-56.519 43.646-63.569 75.216-1.41 6.253-1.594 8.337-1.594 18.881 0 10.421.184 12.689 1.533 18.635 9.379 41.256 47.385 71.723 96.549 77.301 10.666 1.165 56.765 1.165 67.431 0 39.478-4.475 73.439-25.869 88.703-55.907 4.045-8.03 6.007-13.241 7.846-21.394 1.349-5.946 1.533-8.214 1.533-18.635 0-10.544-.184-12.628-1.594-18.881-10.238-45.853-54.742-81.959-109.3-88.825-7.111-.858-25.746-1.594-30.405-1.104zm22.926 33.348c18.207 1.962 36.536 8.46 51.248 18.268 7.908 5.272 19.065 16.306 23.846 23.54 5.885 8.949 9.256 18.083 10.789 29.179.674 5.088.307 8.95-1.533 17.164-2.881 12.26-11.831 25.072-23.907 34.022-5.64 4.107-17.348 10.054-24.52 12.383-13.609 4.352-22.498 5.149-54.252 4.904-20.719-.184-24.398-.368-30.344-1.471-20.29-3.801-36.351-11.893-47.998-24.214-9.441-9.931-13.732-19.003-16.061-33.654-1.042-6.805.919-18.084 4.904-27.586 4.843-11.586 17.348-25.991 29.731-34.267 14.344-9.563 33.225-16.367 50.573-18.206 6.682-.736 20.842-.736 27.524-.062z"}),(0,r.jsx)("path",{d:"M299.584 436.336c-4.659 2.513-7.908 8.888-6.927 13.608 1.103 5.088 5.578 10.238 12.566 14.468 3.74 2.268 3.985 2.574 4.169 4.842.122 1.349-.368 5.211-1.042 8.644-.736 3.371-1.288 6.927-1.288 7.908.062 2.636 2.514 6.927 5.088 9.011 2.269 1.839 2.698 1.9 9.073 2.084 5.824.184 7.05.061 9.379-1.042 6.008-2.943 7.54-8.337 5.333-18.697-1.839-8.643-1.471-9.992 3.127-12.628 4.842-2.82 9.992-7.785 11.524-11.157 2.943-6.436.245-13.731-6.253-17.103-1.593-.797-3.555-1.164-6.436-1.164-4.475 0-7.356 1.042-12.628 4.413l-3.004 1.901-1.9-1.165c-7.785-4.598-9.195-5.149-13.916-5.088-3.371 0-5.21.306-6.865 1.165zM150.744 365.165c-10.85 3.433-18.942 11.402-23.11 22.743-2.023 5.395-3.004 13.916-2.146 18.513 2.023 10.973 11.034 20.965 21.272 23.724 12.873 3.371 22.497 1.164 31.018-7.295 4.965-4.843 7.663-9.073 10.36-15.939 1.961-4.842 2.084-5.7 2.084-12.566l.061-7.356-2.574-5.272c-4.108-8.337-11.525-14.529-20.107-16.797-4.843-1.226-12.628-1.164-16.858.245zM478.153 364.982c-8.398 2.268-15.877 8.52-19.862 16.735l-2.574 5.272.061 7.356c0 6.866.123 7.724 2.084 12.566 2.698 6.866 5.395 11.096 10.36 15.939 8.521 8.459 18.145 10.666 31.019 7.295 7.417-1.962 14.834-8.215 18.39-15.51 3.065-6.191 3.8-10.666 2.82-17.716-2.268-16.122-11.709-27.83-25.747-31.937-4.107-1.226-12.076-1.226-16.551 0z"})]}))},75031:(e,t,i)=>{i.d(t,{A:()=>n});var r=i(96540);function n(){const[e,t]=(0,r.useState)(()=>new Set),i=(0,r.useCallback)((e,i=!0)=>{t(t=>{const r=new Set(t);return i?r.add(e):r.delete(e),r})},[]),n=(0,r.useCallback)(t=>t?e.has(t):e.size>0,[e]);return(0,r.useMemo)(()=>({setError:i,haveError:n}),[i,n])}},76365:(e,t,i)=>{i.d(t,{A:()=>d});var r=i(74848),n=i(8039),a=i(19825),l=i(37603),o=i(96540),s=i(32389);const d=function(e){const{fileType:t,label:i,disabled:d=!1}=e,{t:c}=(0,s.Bd)(),u=a.C?.contextProviders?.FileTemplatesContext?(0,o.useContext)(a.C.contextProviders.FileTemplatesContext):void 0,x=u?.getTemplates();if("url"===t||!x)return null;const m=t?x.filter(e=>e.type===t):x.filter(e=>void 0===e.type);if(!m||m.length<2)return null;const p=i||c("defaultTemplate"+(t??""));return(0,r.jsx)(n.A,{"data-tid":"tagDelimiterTID",label:p,disabled:d,fullWidth:!0,value:u?.getTemplate(t)?.id,onChange:e=>u?.setTemplateActive(e.target.value),children:m.map((e,t)=>(0,r.jsx)(l.A,{value:e.id,children:e.name}))})}}}]);
//# sourceMappingURL=1352.bundle.js.map